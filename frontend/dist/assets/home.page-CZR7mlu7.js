import{g as re,q as dt,h as _,N as be,S as Le,b as c,F as E,i as s,n as I,w as u,o as r,j as t,y as A,e as H,A as D,d as q,t as v,D as L,I as fe,x as _t,k as G,C as ut,c as Te,B as ze,P as qe,r as Q,m as U,f as wt,z as kt,T as $t,U as De,s as St,a as Be,V as rt,W as Ct,X as Se,Y as ve,Z as Lt,u as Tt,v as it}from"./index-B3e5YSF3.js";import{T as xe}from"./index-D_I0lxb5.js";import{s as me,a as Oe,b as zt}from"./index-CV5Hu1iJ.js";import{s as ct}from"./index-BnzhCfOv.js";import{s as Ve,_ as Z}from"./no-data-9opuyewh.js";import{f as z,h as pt,j as X,s as ie,k as ft,m as qt,n as Dt,o as Bt,p as Ot,q as Vt}from"./index-DdqRGxFX.js";import{d as ye}from"./index-BO3o9GEZ.js";import{_ as Ft,a as Pt}from"./strategicNetValueChart.template.vue_vue_type_script_setup_true_lang-DDR5jkob.js";import{c as jt,d as gt}from"./index-nT30RV9H.js";import{s as At}from"./index-_LB6y7JJ.js";import{s as It,a as Wt}from"./index-BdSgz9dn.js";import{s as Rt}from"./index-StIlDHvi.js";import{_ as Nt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Mt}from"./user-zDHzfMXm.js";const Ut={class:"flex items-center justify-between"},Et={key:0,class:"flex gap-6 items-center"},Ht={class:"flex flex-col gap-2"},Kt={key:1,class:"flex gap-2 lg:gap-4 items-center"},Yt={class:"text-xs flex flex-col gap-1"},Jt={class:"text-sm font-bold"},Gt={class:"flex items-center"},Zt={class:"flex items-center"},Qt={class:"flex items-center"},Xt={key:0,class:"flex gap-6 items-center"},el={class:"flex flex-col gap-2"},tl={key:1,class:"flex flex-col gap-6"},ll={class:"flex justify-center"},sl={class:"text-xs flex flex-col gap-2 items-center"},ol={class:"text-sm font-bold"},nl={class:"space-y-2"},al={class:"flex items-center"},rl={class:"flex items-center"},il={class:"flex items-center"},dl=re({__name:"dataCenterModule.template",props:{currentNewFrameWorkId:{},frameWorkName:{},downloadIsLoading:{type:Boolean}},setup(l,{expose:o}){const i=dt(),m=l,h=_(!1),d=_(z.stop),x=_(!1),f=_(null),T=_([]),k=_(!1),w=_(null),B=()=>{P(),O()},O=async()=>{x.value=!0;try{const V=await pt();if(V.result===!0&&V.data&&V.data.length>0){T.value=V.data;const b=V.data.find(K=>K.framework_id===m.currentNewFrameWorkId);if(b){if(b.status===X.online||b.status===X.stopped||b.status===X.errored){x.value=!1,w.value=b,d.value=b.status===X.online?z.start:z.stop;return}}else{x.value=!1;return}}else{x.value=!1;return}}catch{x.value=!1;return}f.value=setTimeout(O,1e3)},P=()=>{f.value&&(clearTimeout(f.value),f.value=null)},Y=async V=>{x.value=!0;const b=await ft({framework_id:m.currentNewFrameWorkId,pm_id:null,type:V});b.result?(i.add({severity:"success",summary:"操作成功",life:2e3}),B()):i.add({severity:"error",summary:"操作失败",detail:b.msg,life:3e3})};return be(()=>{P()}),Le(()=>{P()}),o({startFrameWorkRunStatusTimer:B}),(V,b)=>{const K=ie,W=Ve,F=Oe,le=ct,M=me,S=xe;return r(),c(E,null,[s(le,{class:I(["hidden sm:flex flex-1",[h.value===!0?"w-screen h-screen fixed inset-0 z-50 bg-white dark:bg-neutral-900 p-4 flex flex-col rounded-none":""]]),pt:{body:{class:"px-4 py-3"}}},{title:u(()=>[t("div",Ut,[b[8]||(b[8]=t("div",{class:"flex items-center gap-2"},[t("i",{class:"pi pi-database"}),t("span",{class:"text-lg font-bold"},"数据中心")],-1)),h.value===!1?A((r(),q(K,{key:0,icon:"pi pi-window-maximize",text:"",rounded:"",severity:"secondary",size:"small",onClick:b[0]||(b[0]=()=>h.value=!0)},null,512)),[[S,"全屏显示"]]):A((r(),q(K,{key:1,icon:"pi pi-window-minimize",text:"",rounded:"",severity:"secondary",size:"small",onClick:b[1]||(b[1]=()=>h.value=!1)},null,512)),[[S,"退出全屏"]])])]),content:u(()=>[V.downloadIsLoading?(r(),c("div",Et,[s(W,{shape:"circle",width:"5rem",height:"5rem",class:"mr-4"}),t("div",Ht,[s(W,{width:"8rem",height:"1.5rem"}),s(W,{width:"6rem",height:"1.5rem"}),s(W,{width:"10rem",height:"1.5rem"})])])):(r(),c("div",Kt,[d.value===D(z).stop?A((r(),q(K,{key:0,class:"w-20 h-20 hover:scale-105 transition-transform duration-300 flex-shrink-0",onClick:b[2]||(b[2]=a=>Y(D(z).start)),icon:"pi pi-caret-right",iconClass:"text-3xl",rounded:"",raised:"",severity:"success",disabled:x.value},null,8,["disabled"])),[[S,"启动数据中心"]]):H("",!0),d.value===D(z).start?A((r(),q(K,{key:1,class:"w-20 h-20 hover:scale-105 transition-transform duration-300 flex-shrink-0",onClick:b[3]||(b[3]=a=>Y(D(z).stop)),icon:"pi pi-stop-circle",iconClass:"text-3xl",rounded:"",raised:"",severity:"danger",disabled:x.value},null,8,["disabled"])),[[S,"停止数据中心"]]):H("",!0),t("div",Yt,[t("div",Jt,v(V.frameWorkName),1),t("div",Gt,[b[9]||(b[9]=t("span",{class:"w-16 text-left"},"内存占用:",-1)),s(F,{class:"text-xs font-medium"},{default:u(()=>{var a;return[L(v(((a=w.value)==null?void 0:a.mem_usage)||"_"),1)]}),_:1})]),t("div",Zt,[b[10]||(b[10]=t("span",{class:"w-16 text-left"},"cpu占用:",-1)),s(F,{class:"text-xs font-medium"},{default:u(()=>{var a;return[L(v(((a=w.value)==null?void 0:a.cpu_usage)||"_"),1)]}),_:1})]),t("div",Qt,[b[11]||(b[11]=t("span",{class:"w-16 text-left"},"启动时间:",-1)),s(F,{class:"text-xs font-medium"},{default:u(()=>{var a,p;return[L(v((a=w.value)!=null&&a.pm_uptime?D(ye)((p=w.value)==null?void 0:p.pm_uptime).format("YYYY-MM-DD HH:mm:ss"):"--"),1)]}),_:1})])])]))]),_:1},8,["class"]),s(le,{class:"sm:hidden flex-1"},{content:u(()=>[t("div",{class:"font-bold text-center flex items-center justify-center gap-2",onClick:b[4]||(b[4]=()=>k.value=!0)},b[12]||(b[12]=[t("i",{class:"pi pi-database"},null,-1),t("span",null,"数据中心控制",-1)]))]),_:1}),s(M,{visible:k.value,"onUpdate:visible":b[7]||(b[7]=a=>k.value=a),header:"数据中心控制",modal:"",class:"hidden sm:block w-[90vw] sm:w-[600px] max-w-full"},{default:u(()=>[V.downloadIsLoading?(r(),c("div",Xt,[s(W,{shape:"circle",width:"5rem",height:"5rem",class:"mr-4"}),t("div",el,[s(W,{width:"8rem",height:"1.5rem"}),s(W,{width:"6rem",height:"1.5rem"}),s(W,{width:"10rem",height:"1.5rem"})])])):(r(),c("div",tl,[t("div",ll,[d.value===D(z).stop?A((r(),q(K,{key:0,class:"w-20 h-20 hover:scale-105 transition-transform duration-300",onClick:b[5]||(b[5]=a=>Y(D(z).start)),icon:"pi pi-caret-right",iconClass:"text-3xl",rounded:"",raised:"",severity:"success",disabled:x.value},null,8,["disabled"])),[[S,"启动数据中心"]]):H("",!0),d.value===D(z).start?A((r(),q(K,{key:1,class:"w-20 h-20 hover:scale-105 transition-transform duration-300",onClick:b[6]||(b[6]=a=>Y(D(z).stop)),icon:"pi pi-stop-circle",iconClass:"text-3xl",rounded:"",raised:"",severity:"danger",disabled:x.value},null,8,["disabled"])),[[S,"停止数据中心"]]):H("",!0)]),t("div",sl,[t("div",ol,v(V.frameWorkName),1),t("div",nl,[t("div",al,[b[13]||(b[13]=t("span",{class:"w-16 text-left"},"内存占用:",-1)),s(F,{class:"text-xs font-medium"},{default:u(()=>{var a;return[L(v(((a=w.value)==null?void 0:a.mem_usage)||"_"),1)]}),_:1})]),t("div",rl,[b[14]||(b[14]=t("span",{class:"w-16 text-left"},"cpu占用:",-1)),s(F,{class:"text-xs font-medium"},{default:u(()=>{var a;return[L(v(((a=w.value)==null?void 0:a.cpu_usage)||"_"),1)]}),_:1})]),t("div",il,[b[15]||(b[15]=t("span",{class:"w-16 text-left"},"启动时间:",-1)),s(F,{class:"text-xs font-medium"},{default:u(()=>{var a,p;return[L(v((a=w.value)!=null&&a.pm_uptime?D(ye)((p=w.value)==null?void 0:p.pm_uptime).format("YYYY-MM-DD HH:mm:ss"):"--"),1)]}),_:1})])])])]))]),_:1},8,["visible"])],64)}}}),ul={class:"flex items-center justify-between"},cl={key:0,class:"flex flex-col gap-3 pr-4"},pl={class:"flex flex-col gap-1 pl-2"},fl={class:"flex items-center gap-2"},gl={class:"flex flex-col gap-1 pl-2"},vl={class:"text-sm flex items-center gap-1"},yl={key:0,class:"relative flex h-3 w-3 items-center justify-center"},bl={key:1,class:"rounded-full h-2 w-2 bg-gray-300"},xl={class:"text-xs flex gap-2"},ml={class:"flex items-center gap-2"},hl={class:"flex items-center gap-2"},_l={class:"flex items-center gap-2"},wl={class:"flex items-center gap-2"},kl={key:1},$l={class:"text-sm flex items-center"},Sl={key:0,class:"flex flex-col gap-3 pr-4"},Cl={class:"flex flex-col gap-1 pl-2"},Ll={class:"flex items-center gap-2"},Tl={key:0,class:"flex flex-col gap-2 pr-4"},zl={class:"flex flex-col gap-2 pl-2"},ql={class:"text-sm flex items-center gap-1"},Dl={key:0,class:"relative flex h-3 w-3 items-center justify-center"},Bl={key:1,class:"rounded-full h-2 w-2 bg-gray-300"},Ol={class:"text-xs flex gap-2 flex-wrap pl-3"},Vl={class:"flex items-center"},Fl={class:"flex items-center"},Pl={class:"flex items-center"},jl={class:"flex items-center gap-2"},Al={key:1},Il={class:"text-sm flex items-center"},Wl=re({__name:"strategyCenterModule.template",props:{downloadIsLoading:{type:Boolean},frameWorkList:{}},setup(l){const o=_(null),i=ut(),m=_(!1),h=_(!1),d=_(!0),x=_([]),f=l,T=dt(),k=_(null),w=_([]),B=_({is_simulate:null,error_webhook_url:"",factor_col_limit:64,is_encrypt:!1}),O=_(null);fe(async()=>{f.frameWorkList&&f.frameWorkList.length>0&&P()}),_t(()=>f.frameWorkList,S=>{S&&S.length>0&&P()},{immediate:!0});const P=()=>{V(),Y()},Y=async()=>{d.value=!0,w.value=JSON.parse(JSON.stringify(f.frameWorkList));try{const S=await pt();if(S.result===!0&&S.data&&S.data.length>0){x.value=S.data;let a=!1;for(let p of S.data)if(p.status===X.starting||p.status===X.stopping||p.status===X.restarting){a=!0;break}if(a===!1){d.value=!1;for(let p of w.value){const $=x.value.find(R=>R.framework_id===p.framework_id&&R.name==="startup");p.status=($==null?void 0:$.status)===X.online?z.start:z.stop,p.pm_uptime=($==null?void 0:$.pm_uptime)||null,p.cpu_usage=($==null?void 0:$.cpu_usage)||null,p.mem_usage=($==null?void 0:$.mem_usage)||null}return}}else{d.value=!1;for(let a of w.value){const p=x.value.find($=>$.framework_id===a.framework_id&&$.name==="startup");a.status=(p==null?void 0:p.status)===X.online?z.start:z.stop,a.pm_uptime=(p==null?void 0:p.pm_uptime)||null,a.cpu_usage=(p==null?void 0:p.cpu_usage)||null,a.mem_usage=(p==null?void 0:p.mem_usage)||null}return}}catch{return}k.value=setTimeout(()=>{Y()},1e3)},V=()=>{k.value&&(clearTimeout(k.value),k.value=null)},b=async S=>{var p,$,R,ee;const a=await Dt(S);a.result===!0&&(B.value.is_simulate=((p=a.data)==null?void 0:p.is_simulate)||null,B.value.error_webhook_url=(($=a.data)==null?void 0:$.error_webhook_url)||"",B.value.factor_col_limit=((R=a.data)==null?void 0:R.factor_col_limit)||64,B.value.is_encrypt=((ee=a.data)==null?void 0:ee.is_encrypt)||!1)},K=S=>{const a=x.value.find(p=>p.framework_id===S&&p.name==="startup");return(a==null?void 0:a.pm_id)||null},W=async(S,a)=>{var p;if(a===z.start){const $=await qt(S);if(!$.result||$.data==null||$.data.length==0){T.add({severity:"warn",summary:"请先增加账户,导入策略,完成配置!",life:3e3});return}}if(await b(S),B.value.is_encrypt===!0&&a===z.start&&o.value){O.value={status:a,frameWorkId:S},(p=o.value)==null||p.openDialog();return}F(S,a)},F=async(S,a,p="")=>{let $={framework_id:S,pm_id:K(S),type:a};p&&($.secret_key=p);const R=await ft($);O.value=null,R.result?(T.add({severity:"success",summary:"操作成功",life:2e3}),P()):T.add({severity:"error",summary:"操作失败",detail:R.msg,life:3e3})},le=S=>{if(!O.value){T.add({severity:"error",summary:"操作失败",detail:"未找到待执行的操作",life:3e3});return}const{status:a,frameWorkId:p}=O.value;F(p,a,S)},M=(S=0)=>{i.push({path:`/strategyCenter/${S}`})};return be(()=>{V()}),Le(()=>{V()}),(S,a)=>{const p=ie,$=Ve,R=Oe,ee=ct,he=me,te=xe;return r(),c(E,null,[s(ee,{class:I(["hidden sm:flex flex-2",[m.value===!0?"w-screen h-screen fixed inset-0 z-50 bg-white dark:bg-neutral-900 p-4 flex flex-col rounded-none":""]]),pt:{body:{class:"px-4 py-3"}}},{title:u(()=>[t("div",ul,[a[7]||(a[7]=t("div",{class:"flex items-center gap-2"},[t("i",{class:"pi pi-chart-scatter"}),t("span",{class:"text-lg font-bold"},"策略中心")],-1)),m.value===!1?A((r(),q(p,{key:0,icon:"pi pi-window-maximize",text:"",rounded:"",severity:"secondary",size:"small",onClick:a[0]||(a[0]=()=>m.value=!0)},null,512)),[[te,"全屏显示"]]):A((r(),q(p,{key:1,icon:"pi pi-window-minimize",text:"",rounded:"",severity:"secondary",size:"small",onClick:a[1]||(a[1]=()=>m.value=!1)},null,512)),[[te,"退出全屏"]])])]),content:u(()=>[d.value?(r(),c("div",cl,[(r(),c(E,null,G(2,y=>t("div",{key:y,class:"flex items-center justify-between"},[t("div",pl,[s($,{width:"120px",height:"20px"}),s($,{width:"80px",height:"14px"})]),t("div",fl,[s($,{shape:"circle",width:"32px",height:"32px"}),s($,{shape:"circle",width:"32px",height:"32px"})])])),64))])):(r(),c(E,{key:1},[w.value&&w.value.length>0?(r(),c("div",{key:0,class:I(["flex flex-col gap-2 pr-4",[m.value===!1?"max-h-[108px] overflow-y-auto":""]])},[(r(!0),c(E,null,G(w.value,(y,C)=>(r(),c("div",{key:C,class:"flex items-center justify-between"},[t("div",gl,[t("div",vl,[y.status===D(z).start?(r(),c("span",yl,a[8]||(a[8]=[t("span",{class:"animate-ping absolute inline-flex h-2.5 w-2.5 rounded-full bg-green-500 opacity-75"},null,-1),t("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-green-500"},null,-1)]))):(r(),c("span",bl)),t("span",null,v(y.framework_name),1)]),t("div",xl,[t("div",ml,[a[9]||(a[9]=t("span",null,"内存占用:",-1)),s(R,{class:"text-xs font-medium"},{default:u(()=>[L(v((y==null?void 0:y.mem_usage)||"_"),1)]),_:2},1024)]),t("div",hl,[a[10]||(a[10]=t("span",null,"cpu占用:",-1)),s(R,{class:"text-xs font-medium"},{default:u(()=>[L(v((y==null?void 0:y.cpu_usage)||"_"),1)]),_:2},1024)]),t("div",_l,[a[11]||(a[11]=t("span",null,"启动时间:",-1)),s(R,{class:"text-xs font-medium"},{default:u(()=>[L(v(y!=null&&y.pm_uptime?D(ye)(y==null?void 0:y.pm_uptime).format("YYYY-MM-DD HH:mm:ss"):"--"),1)]),_:2},1024)])])]),t("div",wl,[s(p,{icon:"pi pi-cog",text:"",rounded:"",size:"small",onClick:n=>M(y.id)},null,8,["onClick"]),y.status===D(z).stop?A((r(),q(p,{key:0,onClick:n=>W(y.framework_id,D(z).start),icon:"pi pi-caret-right",rounded:"",raised:"",disabled:d.value,size:"small",class:"hover:scale-105 transition-transform duration-300"},null,8,["onClick","disabled"])),[[te,"启动"]]):H("",!0),y.status===D(z).start?A((r(),q(p,{key:1,onClick:n=>W(y.framework_id,D(z).stop),icon:"pi pi-stop-circle","icon-class":"text-red-500",rounded:"",raised:"",disabled:d.value,size:"small",class:"hover:scale-105 transition-transform duration-300 bg-white dark:bg-neutral-700 border-1 border-neutral-300 dark:border-neutral-600"},null,8,["onClick","disabled"])),[[te,"停止"]]):H("",!0)])]))),128))],2)):(r(),c("div",kl,[t("div",$l,[a[12]||(a[12]=t("span",null,"你目前暂无框架，请先",-1)),s(p,{size:"small",variant:"outlined",text:"",class:"p-1 text-sm",label:"新增框架",onClick:a[2]||(a[2]=y=>M())}),a[13]||(a[13]=L(" ！ "))])]))],64))]),_:1},8,["class"]),s(ee,{class:"sm:hidden flex-1"},{content:u(()=>[t("div",{class:"font-bold text-center flex items-center justify-center gap-2",onClick:a[3]||(a[3]=()=>h.value=!0)},a[14]||(a[14]=[t("i",{class:"pi pi-chart-scatter"},null,-1),t("span",null,"策略中心控制",-1)]))]),_:1}),s(he,{visible:h.value,"onUpdate:visible":a[5]||(a[5]=y=>h.value=y),header:"策略中心控制",modal:"",class:"hidden sm:block w-[90vw] sm:w-[600px] max-w-full"},{default:u(()=>[d.value?(r(),c("div",Sl,[(r(),c(E,null,G(2,y=>t("div",{key:y,class:"flex items-center justify-between"},[t("div",Cl,[s($,{width:"120px",height:"20px"}),s($,{width:"80px",height:"14px"})]),t("div",Ll,[s($,{shape:"circle",width:"32px",height:"32px"}),s($,{shape:"circle",width:"32px",height:"32px"})])])),64))])):(r(),c(E,{key:1},[w.value&&w.value.length>0?(r(),c("div",Tl,[(r(!0),c(E,null,G(w.value,(y,C)=>(r(),c("div",{key:C,class:"flex items-center justify-between"},[t("div",zl,[t("div",ql,[y.status===D(z).start?(r(),c("span",Dl,a[15]||(a[15]=[t("span",{class:"animate-ping absolute inline-flex h-2.5 w-2.5 rounded-full bg-green-500 opacity-75"},null,-1),t("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-green-500"},null,-1)]))):(r(),c("span",Bl)),t("span",null,v(y.framework_name),1)]),t("div",Ol,[t("div",Vl,[a[16]||(a[16]=t("span",{class:"w-16"},"内存占用:",-1)),s(R,{class:"text-xs font-medium"},{default:u(()=>[L(v((y==null?void 0:y.mem_usage)||"_"),1)]),_:2},1024)]),t("div",Fl,[a[17]||(a[17]=t("span",{class:"w-16"},"cpu占用:",-1)),s(R,{class:"text-xs font-medium"},{default:u(()=>[L(v((y==null?void 0:y.cpu_usage)||"_"),1)]),_:2},1024)]),t("div",Pl,[a[18]||(a[18]=t("span",{class:"w-16"},"启动时间:",-1)),s(R,{class:"text-xs font-medium"},{default:u(()=>[L(v(y!=null&&y.pm_uptime?D(ye)(y==null?void 0:y.pm_uptime).format("YYYY-MM-DD HH:mm:ss"):"--"),1)]),_:2},1024)])])]),t("div",jl,[s(p,{icon:"pi pi-cog",text:"",rounded:"",size:"small",onClick:n=>M(y.id)},null,8,["onClick"]),y.status===D(z).stop?A((r(),q(p,{key:0,onClick:n=>W(y.framework_id,D(z).start),icon:"pi pi-caret-right",rounded:"",raised:"",disabled:d.value,size:"small",class:"hover:scale-105 transition-transform duration-300"},null,8,["onClick","disabled"])),[[te,"启动"]]):H("",!0),y.status===D(z).start?A((r(),q(p,{key:1,onClick:n=>W(y.framework_id,D(z).stop),icon:"pi pi-stop-circle","icon-class":"text-red-500",rounded:"",raised:"",disabled:d.value,size:"small",class:"hover:scale-105 transition-transform duration-300 bg-white dark:bg-neutral-700 border-0"},null,8,["onClick","disabled"])),[[te,"停止"]]):H("",!0)])]))),128))])):(r(),c("div",Al,[t("div",Il,[a[19]||(a[19]=t("span",null,"你目前暂无框架，请先",-1)),s(p,{size:"small",variant:"outlined",text:"",class:"p-1 text-sm",label:"新增框架",onClick:a[4]||(a[4]=y=>M())}),a[20]||(a[20]=L(" ！ "))])]))],64))]),_:1},8,["visible"]),s(Ft,{ref_key:"refInputEncryptedPwdDialogTmpl",ref:o,onConfirm:le,onCancel:a[6]||(a[6]=y=>O.value=null)},null,512)],64)}}});var Rl=Te`
    .p-panel {
        border: 1px solid dt('panel.border.color');
        border-radius: dt('panel.border.radius');
        background: dt('panel.background');
        color: dt('panel.color');
    }

    .p-panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: dt('panel.header.padding');
        background: dt('panel.header.background');
        color: dt('panel.header.color');
        border-style: solid;
        border-width: dt('panel.header.border.width');
        border-color: dt('panel.header.border.color');
        border-radius: dt('panel.header.border.radius');
    }

    .p-panel-toggleable .p-panel-header {
        padding: dt('panel.toggleable.header.padding');
    }

    .p-panel-title {
        line-height: 1;
        font-weight: dt('panel.title.font.weight');
    }

    .p-panel-content {
        padding: dt('panel.content.padding');
    }

    .p-panel-footer {
        padding: dt('panel.footer.padding');
    }
`,Nl={root:function(o){var i=o.props;return["p-panel p-component",{"p-panel-toggleable":i.toggleable}]},header:"p-panel-header",title:"p-panel-title",headerActions:"p-panel-header-actions",pcToggleButton:"p-panel-toggle-button",contentContainer:"p-panel-content-container",content:"p-panel-content",footer:"p-panel-footer"},Ml=ze.extend({name:"panel",style:Rl,classes:Nl}),Ul={name:"BasePanel",extends:St,props:{header:String,toggleable:Boolean,collapsed:Boolean,toggleButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}}},style:Ml,provide:function(){return{$pcPanel:this,$parentInstance:this}}},vt={name:"Panel",extends:Ul,inheritAttrs:!1,emits:["update:collapsed","toggle"],data:function(){return{d_collapsed:this.collapsed}},watch:{collapsed:function(o){this.d_collapsed=o}},methods:{toggle:function(o){this.d_collapsed=!this.d_collapsed,this.$emit("update:collapsed",this.d_collapsed),this.$emit("toggle",{originalEvent:o,value:this.d_collapsed})},onKeyDown:function(o){(o.code==="Enter"||o.code==="NumpadEnter"||o.code==="Space")&&(this.toggle(o),o.preventDefault())}},computed:{buttonAriaLabel:function(){return this.toggleButtonProps&&this.toggleButtonProps.ariaLabel?this.toggleButtonProps.ariaLabel:this.header},dataP:function(){return Be({toggleable:this.toggleable})}},components:{PlusIcon:At,MinusIcon:jt,Button:ie},directives:{ripple:De}},El=["data-p"],Hl=["data-p"],Kl=["id"],Yl=["id","aria-labelledby"];function Jl(l,o,i,m,h,d){var x=qe("Button");return r(),c("div",U({class:l.cx("root"),"data-p":d.dataP},l.ptmi("root")),[t("div",U({class:l.cx("header"),"data-p":d.dataP},l.ptm("header")),[Q(l.$slots,"header",{id:l.$id+"_header",class:I(l.cx("title"))},function(){return[l.header?(r(),c("span",U({key:0,id:l.$id+"_header",class:l.cx("title")},l.ptm("title")),v(l.header),17,Kl)):H("",!0)]}),t("div",U({class:l.cx("headerActions")},l.ptm("headerActions")),[Q(l.$slots,"icons"),l.toggleable?Q(l.$slots,"togglebutton",{key:0,collapsed:h.d_collapsed,toggleCallback:function(T){return d.toggle(T)},keydownCallback:function(T){return d.onKeyDown(T)}},function(){return[s(x,U({id:l.$id+"_header",class:l.cx("pcToggleButton"),"aria-label":d.buttonAriaLabel,"aria-controls":l.$id+"_content","aria-expanded":!h.d_collapsed,unstyled:l.unstyled,onClick:o[0]||(o[0]=function(f){return d.toggle(f)}),onKeydown:o[1]||(o[1]=function(f){return d.onKeyDown(f)})},l.toggleButtonProps,{pt:l.ptm("pcToggleButton")}),{icon:u(function(f){return[Q(l.$slots,l.$slots.toggleicon?"toggleicon":"togglericon",{collapsed:h.d_collapsed},function(){return[(r(),q(wt(h.d_collapsed?"PlusIcon":"MinusIcon"),U({class:f.class},l.ptm("pcToggleButton").icon),null,16,["class"]))]})]}),_:3},16,["id","class","aria-label","aria-controls","aria-expanded","unstyled","pt"])]}):H("",!0)],16)],16,Hl),s($t,U({name:"p-toggleable-content"},l.ptm("transition")),{default:u(function(){return[A(t("div",U({id:l.$id+"_content",class:l.cx("contentContainer"),role:"region","aria-labelledby":l.$id+"_header"},l.ptm("contentContainer")),[t("div",U({class:l.cx("content")},l.ptm("content")),[Q(l.$slots,"default")],16),l.$slots.footer?(r(),c("div",U({key:0,class:l.cx("footer")},l.ptm("footer")),[Q(l.$slots,"footer")],16)):H("",!0)],16,Yl),[[kt,!h.d_collapsed]])]}),_:3},16)],16,El)}vt.render=Jl;var Gl=Te`
    .p-togglebutton {
        display: inline-flex;
        cursor: pointer;
        user-select: none;
        overflow: hidden;
        position: relative;
        color: dt('togglebutton.color');
        background: dt('togglebutton.background');
        border: 1px solid dt('togglebutton.border.color');
        padding: dt('togglebutton.padding');
        font-size: 1rem;
        font-family: inherit;
        font-feature-settings: inherit;
        transition:
            background dt('togglebutton.transition.duration'),
            color dt('togglebutton.transition.duration'),
            border-color dt('togglebutton.transition.duration'),
            outline-color dt('togglebutton.transition.duration'),
            box-shadow dt('togglebutton.transition.duration');
        border-radius: dt('togglebutton.border.radius');
        outline-color: transparent;
        font-weight: dt('togglebutton.font.weight');
    }

    .p-togglebutton-content {
        display: inline-flex;
        flex: 1 1 auto;
        align-items: center;
        justify-content: center;
        gap: dt('togglebutton.gap');
        padding: dt('togglebutton.content.padding');
        background: transparent;
        border-radius: dt('togglebutton.content.border.radius');
        transition:
            background dt('togglebutton.transition.duration'),
            color dt('togglebutton.transition.duration'),
            border-color dt('togglebutton.transition.duration'),
            outline-color dt('togglebutton.transition.duration'),
            box-shadow dt('togglebutton.transition.duration');
    }

    .p-togglebutton:not(:disabled):not(.p-togglebutton-checked):hover {
        background: dt('togglebutton.hover.background');
        color: dt('togglebutton.hover.color');
    }

    .p-togglebutton.p-togglebutton-checked {
        background: dt('togglebutton.checked.background');
        border-color: dt('togglebutton.checked.border.color');
        color: dt('togglebutton.checked.color');
    }

    .p-togglebutton-checked .p-togglebutton-content {
        background: dt('togglebutton.content.checked.background');
        box-shadow: dt('togglebutton.content.checked.shadow');
    }

    .p-togglebutton:focus-visible {
        box-shadow: dt('togglebutton.focus.ring.shadow');
        outline: dt('togglebutton.focus.ring.width') dt('togglebutton.focus.ring.style') dt('togglebutton.focus.ring.color');
        outline-offset: dt('togglebutton.focus.ring.offset');
    }

    .p-togglebutton.p-invalid {
        border-color: dt('togglebutton.invalid.border.color');
    }

    .p-togglebutton:disabled {
        opacity: 1;
        cursor: default;
        background: dt('togglebutton.disabled.background');
        border-color: dt('togglebutton.disabled.border.color');
        color: dt('togglebutton.disabled.color');
    }

    .p-togglebutton-label,
    .p-togglebutton-icon {
        position: relative;
        transition: none;
    }

    .p-togglebutton-icon {
        color: dt('togglebutton.icon.color');
    }

    .p-togglebutton:not(:disabled):not(.p-togglebutton-checked):hover .p-togglebutton-icon {
        color: dt('togglebutton.icon.hover.color');
    }

    .p-togglebutton.p-togglebutton-checked .p-togglebutton-icon {
        color: dt('togglebutton.icon.checked.color');
    }

    .p-togglebutton:disabled .p-togglebutton-icon {
        color: dt('togglebutton.icon.disabled.color');
    }

    .p-togglebutton-sm {
        padding: dt('togglebutton.sm.padding');
        font-size: dt('togglebutton.sm.font.size');
    }

    .p-togglebutton-sm .p-togglebutton-content {
        padding: dt('togglebutton.content.sm.padding');
    }

    .p-togglebutton-lg {
        padding: dt('togglebutton.lg.padding');
        font-size: dt('togglebutton.lg.font.size');
    }

    .p-togglebutton-lg .p-togglebutton-content {
        padding: dt('togglebutton.content.lg.padding');
    }
`,Zl={root:function(o){var i=o.instance,m=o.props;return["p-togglebutton p-component",{"p-togglebutton-checked":i.active,"p-invalid":i.$invalid,"p-togglebutton-sm p-inputfield-sm":m.size==="small","p-togglebutton-lg p-inputfield-lg":m.size==="large"}]},content:"p-togglebutton-content",icon:"p-togglebutton-icon",label:"p-togglebutton-label"},Ql=ze.extend({name:"togglebutton",style:Gl,classes:Zl}),Xl={name:"BaseToggleButton",extends:gt,props:{onIcon:String,offIcon:String,onLabel:{type:String,default:"Yes"},offLabel:{type:String,default:"No"},iconPos:{type:String,default:"left"},readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null},size:{type:String,default:null}},style:Ql,provide:function(){return{$pcToggleButton:this,$parentInstance:this}}};function pe(l){"@babel/helpers - typeof";return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},pe(l)}function es(l,o,i){return(o=ts(o))in l?Object.defineProperty(l,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[o]=i,l}function ts(l){var o=ls(l,"string");return pe(o)=="symbol"?o:o+""}function ls(l,o){if(pe(l)!="object"||!l)return l;var i=l[Symbol.toPrimitive];if(i!==void 0){var m=i.call(l,o);if(pe(m)!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(l)}var yt={name:"ToggleButton",extends:Xl,inheritAttrs:!1,emits:["change"],methods:{getPTOptions:function(o){var i=o==="root"?this.ptmi:this.ptm;return i(o,{context:{active:this.active,disabled:this.disabled}})},onChange:function(o){!this.disabled&&!this.readonly&&(this.writeValue(!this.d_value,o),this.$emit("change",o))},onBlur:function(o){var i,m;(i=(m=this.formField).onBlur)===null||i===void 0||i.call(m,o)}},computed:{active:function(){return this.d_value===!0},hasLabel:function(){return rt(this.onLabel)&&rt(this.offLabel)},label:function(){return this.hasLabel?this.d_value?this.onLabel:this.offLabel:" "},dataP:function(){return Be(es({checked:this.active,invalid:this.$invalid},this.size,this.size))}},directives:{ripple:De}},ss=["tabindex","disabled","aria-pressed","aria-label","aria-labelledby","data-p-checked","data-p-disabled","data-p"],os=["data-p"];function ns(l,o,i,m,h,d){var x=Ct("ripple");return A((r(),c("button",U({type:"button",class:l.cx("root"),tabindex:l.tabindex,disabled:l.disabled,"aria-pressed":l.d_value,onClick:o[0]||(o[0]=function(){return d.onChange&&d.onChange.apply(d,arguments)}),onBlur:o[1]||(o[1]=function(){return d.onBlur&&d.onBlur.apply(d,arguments)})},d.getPTOptions("root"),{"aria-label":l.ariaLabel,"aria-labelledby":l.ariaLabelledby,"data-p-checked":d.active,"data-p-disabled":l.disabled,"data-p":d.dataP}),[t("span",U({class:l.cx("content")},d.getPTOptions("content"),{"data-p":d.dataP}),[Q(l.$slots,"default",{},function(){return[Q(l.$slots,"icon",{value:l.d_value,class:I(l.cx("icon"))},function(){return[l.onIcon||l.offIcon?(r(),c("span",U({key:0,class:[l.cx("icon"),l.d_value?l.onIcon:l.offIcon]},d.getPTOptions("icon")),null,16)):H("",!0)]}),t("span",U({class:l.cx("label")},d.getPTOptions("label")),v(d.label),17)]})],16,os)],16,ss)),[[x]])}yt.render=ns;var as=Te`
    .p-selectbutton {
        display: inline-flex;
        user-select: none;
        vertical-align: bottom;
        outline-color: transparent;
        border-radius: dt('selectbutton.border.radius');
    }

    .p-selectbutton .p-togglebutton {
        border-radius: 0;
        border-width: 1px 1px 1px 0;
    }

    .p-selectbutton .p-togglebutton:focus-visible {
        position: relative;
        z-index: 1;
    }

    .p-selectbutton .p-togglebutton:first-child {
        border-inline-start-width: 1px;
        border-start-start-radius: dt('selectbutton.border.radius');
        border-end-start-radius: dt('selectbutton.border.radius');
    }

    .p-selectbutton .p-togglebutton:last-child {
        border-start-end-radius: dt('selectbutton.border.radius');
        border-end-end-radius: dt('selectbutton.border.radius');
    }

    .p-selectbutton.p-invalid {
        outline: 1px solid dt('selectbutton.invalid.border.color');
        outline-offset: 0;
    }
`,rs={root:function(o){var i=o.instance;return["p-selectbutton p-component",{"p-invalid":i.$invalid}]}},is=ze.extend({name:"selectbutton",style:as,classes:rs}),ds={name:"BaseSelectButton",extends:gt,props:{options:Array,optionLabel:null,optionValue:null,optionDisabled:null,multiple:Boolean,allowEmpty:{type:Boolean,default:!0},dataKey:null,ariaLabelledby:{type:String,default:null},size:{type:String,default:null}},style:is,provide:function(){return{$pcSelectButton:this,$parentInstance:this}}};function us(l,o){var i=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(!i){if(Array.isArray(l)||(i=bt(l))||o){i&&(l=i);var m=0,h=function(){};return{s:h,n:function(){return m>=l.length?{done:!0}:{done:!1,value:l[m++]}},e:function(k){throw k},f:h}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,x=!0,f=!1;return{s:function(){i=i.call(l)},n:function(){var k=i.next();return x=k.done,k},e:function(k){f=!0,d=k},f:function(){try{x||i.return==null||i.return()}finally{if(f)throw d}}}}function cs(l){return gs(l)||fs(l)||bt(l)||ps()}function ps(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(l,o){if(l){if(typeof l=="string")return Ce(l,o);var i={}.toString.call(l).slice(8,-1);return i==="Object"&&l.constructor&&(i=l.constructor.name),i==="Map"||i==="Set"?Array.from(l):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ce(l,o):void 0}}function fs(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function gs(l){if(Array.isArray(l))return Ce(l)}function Ce(l,o){(o==null||o>l.length)&&(o=l.length);for(var i=0,m=Array(o);i<o;i++)m[i]=l[i];return m}var xt={name:"SelectButton",extends:ds,inheritAttrs:!1,emits:["change"],methods:{getOptionLabel:function(o){return this.optionLabel?ve(o,this.optionLabel):o},getOptionValue:function(o){return this.optionValue?ve(o,this.optionValue):o},getOptionRenderKey:function(o){return this.dataKey?ve(o,this.dataKey):this.getOptionLabel(o)},isOptionDisabled:function(o){return this.optionDisabled?ve(o,this.optionDisabled):!1},isOptionReadonly:function(o){if(this.allowEmpty)return!1;var i=this.isSelected(o);return this.multiple?i&&this.d_value.length===1:i},onOptionSelect:function(o,i,m){var h=this;if(!(this.disabled||this.isOptionDisabled(i)||this.isOptionReadonly(i))){var d=this.isSelected(i),x=this.getOptionValue(i),f;if(this.multiple)if(d){if(f=this.d_value.filter(function(T){return!Se(T,x,h.equalityKey)}),!this.allowEmpty&&f.length===0)return}else f=this.d_value?[].concat(cs(this.d_value),[x]):[x];else{if(d&&!this.allowEmpty)return;f=d?null:x}this.writeValue(f,o),this.$emit("change",{event:o,value:f})}},isSelected:function(o){var i=!1,m=this.getOptionValue(o);if(this.multiple){if(this.d_value){var h=us(this.d_value),d;try{for(h.s();!(d=h.n()).done;){var x=d.value;if(Se(x,m,this.equalityKey)){i=!0;break}}}catch(f){h.e(f)}finally{h.f()}}}else i=Se(this.d_value,m,this.equalityKey);return i}},computed:{equalityKey:function(){return this.optionValue?null:this.dataKey},dataP:function(){return Be({invalid:this.$invalid})}},directives:{ripple:De},components:{ToggleButton:yt}},vs=["aria-labelledby","data-p"];function ys(l,o,i,m,h,d){var x=qe("ToggleButton");return r(),c("div",U({class:l.cx("root"),role:"group","aria-labelledby":l.ariaLabelledby},l.ptmi("root"),{"data-p":d.dataP}),[(r(!0),c(E,null,G(l.options,function(f,T){return r(),q(x,{key:d.getOptionRenderKey(f),modelValue:d.isSelected(f),onLabel:d.getOptionLabel(f),offLabel:d.getOptionLabel(f),disabled:l.disabled||d.isOptionDisabled(f),unstyled:l.unstyled,size:l.size,readonly:d.isOptionReadonly(f),onChange:function(w){return d.onOptionSelect(w,f,T)},pt:l.ptm("pcToggleButton")},Lt({_:2},[l.$slots.option?{name:"default",fn:u(function(){return[Q(l.$slots,"option",{option:f,index:T},function(){return[t("span",U({ref_for:!0},l.ptm("pcToggleButton").label),v(d.getOptionLabel(f)),17)]})]}),key:"0"}:void 0]),1032,["modelValue","onLabel","offLabel","disabled","unstyled","size","readonly","onChange","pt"])}),128))],16,vs)}xt.render=ys;var bs={EQUALS:"equals"};const xs={class:"absolute top-1 right-2 z-10"},ms=re({__name:"longChart.template",props:{dateTime:{},long:{},short:{},empty:{},long_coin_num:{},short_coin_num:{}},setup(l,{expose:o}){const{themeMode:i}=Tt(),m=l,h=_(null),d=_(null),x=_(!1),f=_(0),T=it(()=>({backgroundColor:i.value==="dark"?"#171717":"",color:["#22c55e","#ef4444","#9ca3af"],title:{text:"多空比例",left:"center",textStyle:{fontSize:14,fontWeight:"normal"},top:8},tooltip:{trigger:"axis",z:1e3,textStyle:{fontSize:10}},legend:{data:["Long","Short","empty"],top:32,textStyle:{fontSize:10}},grid:{top:54,left:40,right:5,bottom:20},xAxis:{type:"category",data:m.dateTime,axisLabel:{rotate:0,fontSize:8}},yAxis:{type:"value",min:0,max:1,name:"Ratio",position:"left",nameTextStyle:{fontSize:10}},dataZoom:[{type:"inside",xAxisIndex:0,start:0,end:100}],series:[{name:"Long",type:"line",data:m.long,showSymbol:!1,areaStyle:{color:"#22c55e",opacity:.6},lineStyle:{color:"#22c55e"}},{name:"Short",type:"line",showSymbol:!1,data:m.short,areaStyle:{color:"#ef4444",opacity:.6},lineStyle:{color:"#ef4444"}},{name:"empty",type:"line",showSymbol:!1,data:m.empty,areaStyle:{color:"#9ca3af",opacity:.6},lineStyle:{color:"#9ca3af"}}]})),k=it(()=>({backgroundColor:i.value==="dark"?"#171717":"",title:{text:"多空选币",left:"center",textStyle:{fontSize:14,fontWeight:"normal"},top:8},color:["#6bd16b","#e57373"],tooltip:{trigger:"axis",z:1e3,textStyle:{fontSize:10}},legend:{data:["多头选币","空头选币"],top:32,textStyle:{fontSize:10}},grid:{top:54,left:40,right:5,bottom:20},xAxis:{type:"category",data:m.dateTime,axisLabel:{rotate:0,fontSize:8}},yAxis:{type:"value",name:"数量",nameTextStyle:{fontSize:10}},dataZoom:[{type:"inside",xAxisIndex:0,start:0,end:100}],series:[{name:"多头选币",type:"line",data:m.long_coin_num,showSymbol:!1,lineStyle:{color:"#6bd16b"}},{name:"空头选币",type:"line",data:m.short_coin_num,showSymbol:!1,lineStyle:{color:"#e57373"}}]}));let w=!1,B=window.innerHeight;const O=()=>{if(w||!h.value||!d)return;const P=window.innerHeight;Math.abs(P-B)>10&&(f.value++,B=P)};return fe(()=>{w=!1,window.addEventListener("resize",O)}),be(()=>{w=!0,window.removeEventListener("resize",O)}),o({handleResize:O}),(P,Y)=>{const V=ie,b=qe("v-chart"),K=xe;return r(),c("div",{class:I(["w-full flex-1 flex flex-col",[x.value===!0?"w-screen h-screen fixed inset-0 z-[9999] bg-white dark:bg-neutral-900 p-4":"relative"]])},[t("div",xs,[x.value===!1?A((r(),q(V,{key:0,icon:"pi pi-window-maximize",text:"",rounded:"",severity:"secondary",size:"small",onClick:Y[0]||(Y[0]=W=>x.value=!0)},null,512)),[[K,"放大显示"]]):A((r(),q(V,{key:1,icon:"pi pi-window-minimize",text:"",rounded:"",severity:"secondary",size:"small",onClick:Y[1]||(Y[1]=W=>x.value=!1)},null,512)),[[K,"退出放大"]])]),(r(),q(b,{ref_key:"refChart1",ref:h,key:`longRatio-${f.value}`,option:T.value,theme:D(i)==="dark"?"dark":"light",class:"w-full flex-1",autoresize:""},null,8,["option","theme"])),(r(),q(b,{ref_key:"refChart2",ref:d,key:`coinNum-${f.value}`,option:k.value,theme:D(i)==="dark"?"dark":"light",class:"w-full flex-1",autoresize:""},null,8,["option","theme"]))],2)}}}),hs={key:0,class:"flex justify-between gap-2"},_s={class:"flex gap-2"},ws={class:"flex items-center"},ks={class:"space-y-3 flex-1"},$s={class:"gap-3 pb-2 hidden sm:flex"},Ss={class:"gap-3 pb-2 flex sm:hidden"},Cs={class:"flex items-center gap-1 sm:gap-2"},Ls={class:"text-lg font-bold"},Ts={class:"text-xs text-gray-500 dark:text-gray-200"},zs={class:"text-xs text-center hidden sm:block"},qs={class:"text-gray-500 dark:text-gray-300 font-medium"},Ds={class:"text-md flex items-center justify-center gap-2"},Bs=["onClick"],Os={class:"flex-1 flex justify-center items-center"},Vs={key:1,class:"font-bold text-primary-500 font-mono text-4xl sm:text-5xl"},Fs={key:2,class:"text-7xl font-bold text-primary-500 font-mono"},Ps={class:"text-xs text-center sm:hidden"},js={class:"text-gray-500 dark:text-gray-300 font-medium"},As={class:"text-sm space-y-4 flex-row justify-around"},Is={class:"flex justify-between w-full bg-gray-100 dark:bg-neutral-800 p-2 rounded-md"},Ws={class:"flex flex-1 flex-col items-center gap-2"},Rs={class:"flex flex-1 flex-col items-center gap-2"},Ns={class:"flex justify-between w-full bg-gray-100 dark:bg-neutral-800 p-2 rounded-md"},Ms={class:"flex flex-1 flex-col items-center gap-2"},Us={class:"flex flex-1 flex-col items-center gap-2"},Es={key:1,class:"flex-1 flex flex-col items-center px-4 py-3"},Hs={key:1,class:"flex-1 flex flex-col items-center px-4 py-3"},Ks={class:"w-20"},Ys={key:1,class:"flex-1 flex items-center justify-center"},Js={class:"flex justify-between items-center gap-2"},Gs={key:0,class:"flex-1 flex flex-col px-2 w-full"},Zs={class:"divide-y divide-gray-100 dark:divide-neutral-700"},Qs={class:"flex-1 flex flex-col justify-center gap-1"},Xs={class:"font-semibold text-gray-800 dark:text-gray-200"},eo={class:"text-xs text-gray-500 dark:text-gray-300 text-left"},to={class:"font-mono text-xl text-right"},lo={key:1,class:"flex-1 flex items-center justify-center"},so={class:"flex px-4 justify-between"},oo={key:0,class:"flex items-center justify-center gap-2 text-xs text-gray-500 dark:text-gray-300"},no={key:0,class:"flex flex-col"},ao={class:"w-20 flex"},ro={class:"w-20 text-center"},io={class:"w-12 text-center"},uo={key:0,class:"flex items-center gap-1 flex-wrap"},co={key:0,class:"cursor-pointer text-xs text-primary-500 dark:text-primary-300"},po={class:"w-12 text-center"},fo={class:"w-12 text-center"},go={class:"w-12 text-center"},vo={class:"w-12 text-center"},yo={class:"flex items-center gap-2"},bo={key:1,class:"flex-1 flex items-center justify-center"},xo={key:1,class:"h-full flex-1 flex flex-col items-center justify-center gap-4"},mo={class:"text-center text-sm"},ho={class:"flex flex-col gap-4"},_o={key:0,class:"font-medium text-xs"},wo={key:0,class:"space-x-2"},ko={key:1,class:"space-x-2"},$o={key:1,class:"font-medium text-xs"},So={class:"font-medium text-xs"},Co={key:0},Lo={class:"font-medium text-xs"},To={key:2,class:"font-medium text-xss"},zo=re({__name:"accountListModule.template",setup(l){const o=ut(),i=_(null),m=_(!1),h=_([]),d=_(["持仓合约","持仓现货"]),x=_(!1),f=_([{label:"多",value:1},{label:"空",value:-1}]),T=_({side:{value:null,matchMode:bs.EQUALS}}),k=_("因子"),w=_(["因子","过滤因子","后置因子"]),B=_([]),O=_({factorList:[],filterList:[],filterListPost:[]}),P=_("1h"),Y=[{label:"最近1小时",value:"1h"},{label:"最近24小时",value:"24h"}],V=_(0),b=[{label:"最近7天",value:7},{label:"最近30天",value:30},{label:"全部时间",value:0}],K=_(["盈利","亏损"]),W=_(["bg-green-500","bg-yellow-500","bg-blue-500","bg-purple-500","bg-teal-500"]),F=_([]);fe(()=>{le()});const le=async()=>{m.value=!0;const C=await Bt(V.value);h.value=C.data,h.value.forEach(n=>{n.selectValue="持仓合约",n.coinSortType="盈利"}),S(),m.value=!1,p()},M=_([]),S=()=>{h.value.forEach((C,n)=>{C.strategy_pool&&Array.isArray(C.strategy_pool)&&(C.strategy_pool=C.strategy_pool.flatMap(N=>N.strategy_list.map(de=>({...de,name:N.name}))))})},a=C=>C!=null&&C.pnl_history&&P.value&&C.pnl_history[P.value]&&C.pnl_history[P.value].length>0?C.coinSortType==="盈利"?C.pnl_history[P.value].filter(n=>n.total_pnl>0).sort((n,N)=>N.total_pnl-n.total_pnl).slice(0,5):C.pnl_history[P.value].filter(n=>n.total_pnl<0).sort((n,N)=>n.total_pnl-N.total_pnl).slice(0,5):[],p=()=>{M.value=h.value.map(C=>C.id)},$=()=>{M.value=[]},R=C=>{M.value.includes(C)?M.value=M.value.filter(n=>n!==C):M.value.push(C)},ee=(C=0)=>{o.push({path:`/strategyCenter/${C}`})},he=(C,n,N)=>{x.value=!0,O.value={factorList:C||[],filterList:n||[],filterListPost:N||[]},k.value="因子",B.value=[...O.value.factorList]},te=()=>{k.value==="因子"?B.value=[...O.value.factorList]:k.value==="过滤因子"?B.value=[...O.value.filterList]:k.value==="后置因子"&&(B.value=[...O.value.filterListPost])},y=C=>{F.value.includes(C)?F.value=F.value.filter(n=>n!==C):F.value.push(C)};return(C,n)=>{const N=ie,de=zt,ne=Ve,J=Oe,_e=Rt,we=xt,j=Wt,ke=It,mt=vt,ht=me,ge=xe;return r(),c(E,null,[h.value.length>0?(r(),c("div",hs,[t("div",_s,[s(N,{type:"button",icon:"pi pi-plus","icon-class":"text-xs",class:"text-xs shadow-sm bg-white dark:bg-neutral-800 border-0 text-gray-500 dark:text-gray-200",label:"展开",size:"small",onClick:p,disabled:M.value.length===h.value.length},null,8,["disabled"]),s(N,{type:"button",variant:"outlined","icon-class":"text-xs",icon:"pi pi-minus",label:"折叠",class:"text-xs shadow-sm bg-white dark:bg-neutral-800 border-0 text-gray-500 dark:text-gray-200",size:"small",onClick:$,disabled:M.value.length===0},null,8,["disabled"])]),t("div",ws,[n[8]||(n[8]=t("span",{class:"text-gray-500 text-xs dark:text-gray-300"},"时间范围：",-1)),s(de,{modelValue:V.value,"onUpdate:modelValue":n[0]||(n[0]=e=>V.value=e),options:b,optionLabel:"label",optionValue:"value",placeholder:"时间范围",size:"small",pt:{label:"text-xs py-1",list:"text-xs"},onValueChange:le},null,8,["modelValue"])])])):H("",!0),t("div",ks,[m.value?(r(),c(E,{key:0},G(2,e=>t("div",{key:e,class:"flex flex-col"},[s(ne,{width:"100%",height:"40px",class:"mb-2"}),t("div",$s,[s(ne,{class:"flex-2",height:"250px"}),s(ne,{class:"flex-1",height:"250px"}),s(ne,{class:"flex-1",height:"250px"})]),t("div",Ss,[s(ne,{class:"flex-2",height:"250px"}),s(ne,{class:"flex-1",height:"250px"})])])),64)):(r(),c(E,{key:1},[h.value.length>0?(r(!0),c(E,{key:0},G(h.value,e=>(r(),q(mt,{key:e.id,class:I(["flex flex-col rounded-xl overflow-hidden border-none shadow-sm",[i.value===e.id?"w-screen h-screen fixed inset-0 z-50 p-4 flex flex-col overflow-y-auto rounded-none":"h-auto"]]),pt:{contentContainer:{class:"p-0 flex-1 flex flex-col"},content:{class:"p-0 flex-1"}},collapsed:!M.value.includes(e.id),"onUpdate:collapsed":()=>R(e.id),toggleable:i.value!==e.id},{header:u(()=>{var se,ue,ce;return[t("div",Cs,[t("span",Ls,v(e.account_name),1),t("span",Ts,v(e.framework_name),1),A((r(),q(J,{class:"text-xs font-medium"},{default:u(()=>[L(v(e.hour_offset),1)]),_:2},1024)),[[ge,"分钟偏移"]]),s(N,{icon:"pi pi-pencil",text:"",rounded:"",size:"small",onClick:$e=>ee(e.edit_id)},null,8,["onClick"]),t("div",zs,[n[9]||(n[9]=L(" 更新时间：")),t("span",qs,v(((ce=e==null?void 0:e.equity)==null?void 0:ce.time[((ue=(se=e==null?void 0:e.equity)==null?void 0:se.time)==null?void 0:ue.length)-1])||"--"),1)])])]}),icons:u(()=>[i.value!==e.id?A((r(),q(N,{key:0,icon:"pi pi-window-maximize",text:"",rounded:"",severity:"secondary",size:"small",onClick:se=>i.value=e.id,class:"hidden sm:inline-flex"},null,8,["onClick"])),[[ge,"全屏显示"]]):A((r(),q(N,{key:1,icon:"pi pi-window-minimize",text:"",rounded:"",severity:"secondary",size:"small",onClick:n[1]||(n[1]=se=>i.value=null),class:"hidden sm:inline-flex"},null,512)),[[ge,"退出全屏"]])]),default:u(()=>{var se,ue,ce,$e,Fe,Pe,je,Ae,Ie,We,Re,Ne,Me,Ue,Ee,He,Ke,Ye,Je,Ge,Ze,Qe,Xe,et,tt,lt,st,ot,nt,at;return[t("div",{class:I(["flex gap-3 px-4 pb-1",[i.value===e.id?"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-3":"overflow-x-auto flex-nowrap scrollbar-thin max-h-120 box-content"]])},[t("div",{class:I(["px-4 py-3 flex flex-col gap-4 bg-gray-50 dark:bg-neutral-900 rounded-lg",[i.value===e.id?"max-h-120":"min-w-full sm:min-w-100"]])},[t("div",Ds,[n[10]||(n[10]=L(" 账户净值 ")),t("i",{class:I([[F.value.includes(e.id)?"pi pi-eye-slash":"pi pi-eye"],"hover:text-gray-500 hover:dark:text-gray-300 cursor-pointer text-[18px]"]),onClick:g=>y(e.id)},null,10,Bs)]),t("div",Os,[t("div",{class:I(["flex flex-row flex-wrap justify-center gap-2",[F.value.includes(e.id)?"items-center":"items-end"]])},[!F.value.includes(e.id)&&((se=e==null?void 0:e.equity)!=null&&se.equity_amount)&&((ce=(ue=e==null?void 0:e.equity)==null?void 0:ue.equity_amount)==null?void 0:ce.length)>0?(r(),c("div",{key:0,class:I(["font-bold text-primary-500 font-mono",[($e=e==null?void 0:e.equity)!=null&&$e.equity_amount&&((Pe=(Fe=e==null?void 0:e.equity)==null?void 0:Fe.equity_amount)==null?void 0:Pe.length)>0&&((Ie=e==null?void 0:e.equity)==null?void 0:Ie.equity_amount[((Ae=(je=e==null?void 0:e.equity)==null?void 0:je.equity_amount)==null?void 0:Ae.length)-1])<1e3?"text-6xl sm:text-7xl":(We=e==null?void 0:e.equity)!=null&&We.equity_amount&&((Ne=(Re=e==null?void 0:e.equity)==null?void 0:Re.equity_amount)==null?void 0:Ne.length)>0&&((Ee=e==null?void 0:e.equity)==null?void 0:Ee.equity_amount[((Ue=(Me=e==null?void 0:e.equity)==null?void 0:Me.equity_amount)==null?void 0:Ue.length)-1])<1e5?"text-5xl sm:text-6xl":"text-4xl sm:text-5xl"]])},v(Number((Ye=e==null?void 0:e.equity)==null?void 0:Ye.equity_amount[((Ke=(He=e==null?void 0:e.equity)==null?void 0:He.equity_amount)==null?void 0:Ke.length)-1]).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")),3)):F.value.includes(e.id)?(r(),c("div",Vs," **** ")):(r(),c("div",Fs," -- ")),n[11]||(n[11]=t("div",{class:"text-sm text-gray-500"},"USDT",-1))],2)]),s(_e,{class:"m-0"}),t("div",Ps,[n[12]||(n[12]=L(" 更新时间：")),t("span",js,v(((Ze=e==null?void 0:e.equity)==null?void 0:Ze.time[((Ge=(Je=e==null?void 0:e.equity)==null?void 0:Je.time)==null?void 0:Ge.length)-1])||"--"),1)]),t("div",As,[t("div",Is,[t("div",Ws,[n[13]||(n[13]=t("span",null,"24H盈亏",-1)),s(J,{class:"font-medium w-30 font-mono rounded-sm"},{default:u(()=>[L(v(F.value.includes(e.id)?"****":(e==null?void 0:e.eq_pnl_24h)||"--"),1)]),_:2},1024)]),s(_e,{layout:"vertical"}),t("div",Rs,[n[14]||(n[14]=t("span",null,"24H收益率",-1)),s(J,{class:"font-medium w-30 font-mono rounded-sm"},{default:u(()=>[L(v(F.value.includes(e.id)?"****":(e==null?void 0:e.eq_pct_24h)||"--")+"%",1)]),_:2},1024)])]),t("div",Ns,[t("div",Ms,[n[15]||(n[15]=t("span",null,"24H最大净值",-1)),s(J,{class:"font-medium w-30 font-mono rounded-sm"},{default:u(()=>[L(v(F.value.includes(e.id)?"****":(e==null?void 0:e.eq_max_24h)||"--"),1)]),_:2},1024)]),s(_e,{layout:"vertical"}),t("div",Us,[n[16]||(n[16]=t("span",null,"24H最小净值",-1)),s(J,{class:"font-medium w-30 font-mono rounded-sm"},{default:u(()=>[L(v(F.value.includes(e.id)?"****":(e==null?void 0:e.eq_min_24h)||"--"),1)]),_:2},1024)])])])],2),t("div",{class:I(["box-border flex flex-col justify-end gap-4 bg-gray-50 dark:bg-neutral-900 rounded-lg overflow-hidden",[i.value===e.id?"max-h-120 min-h-100":"min-w-full sm:min-w-110"]])},[e!=null&&e.equity&&((Qe=e==null?void 0:e.equity)!=null&&Qe.time)&&((Xe=e==null?void 0:e.equity)!=null&&Xe.net)&&((et=e==null?void 0:e.equity)!=null&&et.dd2here)&&(e!=null&&e.sub_stg_eqs)?(r(),q(Pt,{key:0,dateTime:e.equity.time,equity:e.equity.net,dd2here:e.equity.dd2here,sub_stg_eqs:e.sub_stg_eqs},null,8,["dateTime","equity","dd2here","sub_stg_eqs"])):(r(),c("div",Es,n[17]||(n[17]=[t("div",{class:"text-md text-center"},"策略净值曲线图",-1),t("div",{class:"flex-1 flex items-center justify-center"},[t("img",{src:Z,class:"w-40 h-auto"})],-1)])))],2),t("div",{class:I(["flex bg-gray-50 dark:bg-neutral-900 rounded-lg overflow-hidden",[i.value===e.id?"max-h-120 min-h-100":"min-w-full sm:min-w-110"]])},[e!=null&&e.equity&&((tt=e==null?void 0:e.equity)!=null&&tt.time)&&((lt=e==null?void 0:e.equity)!=null&&lt.long_ratio)&&((st=e==null?void 0:e.equity)!=null&&st.short_ratio)&&((ot=e==null?void 0:e.equity)!=null&&ot.empty_ratio)&&((nt=e==null?void 0:e.equity)!=null&&nt.long_coin_num)&&((at=e==null?void 0:e.equity)!=null&&at.short_coin_num)?(r(),q(ms,{key:0,dateTime:e.equity.time,long:e.equity.long_ratio,short:e.equity.short_ratio,empty:e.equity.empty_ratio,long_coin_num:e.equity.long_coin_num,short_coin_num:e.equity.short_coin_num},null,8,["dateTime","long","short","empty","long_coin_num","short_coin_num"])):(r(),c("div",Hs,n[18]||(n[18]=[t("div",{class:"text-md text-center"},"多空统计",-1),t("div",{class:"flex-1 flex items-center justify-center"},[t("img",{src:Z,class:"w-40 h-auto"})],-1)])))],2),t("div",{class:I(["pt-3 flex flex-col content-between bg-gray-50 dark:bg-neutral-900 rounded-lg",[i.value===e.id?"max-h-120":e!=null&&e.pos_swap||e!=null&&e.pos_spot?"":"min-w-full sm:min-w-100"]])},[s(we,{modelValue:e.selectValue,"onUpdate:modelValue":g=>e.selectValue=g,options:d.value,size:"small",class:"pl-4"},null,8,["modelValue","onUpdate:modelValue","options"]),e!=null&&e.pos_swap||e!=null&&e.pos_spot?(r(),q(ke,{key:0,value:e.selectValue==="持仓合约"?e.pos_swap||[]:e.pos_spot||[],paginator:"",rows:6,class:"!bg-transparent flex-1 flex flex-col",pt:{tableContainer:{class:"flex-1"},table:{class:"text-xs !bg-transparent h-full"}},filters:T.value,"onUpdate:filters":n[2]||(n[2]=g=>T.value=g),filterDisplay:"menu",globalFilterFields:["side"]},{empty:u(()=>n[19]||(n[19]=[t("div",{class:"flex items-center justify-center h-full"},[t("img",{src:Z,class:"w-40 h-auto"})],-1)])),default:u(()=>[s(j,{field:"symbol",header:"币种",class:"min-w-20"},{body:u(({data:g})=>[t("div",Ks,v(g.symbol||"--"),1)]),_:1}),s(j,{field:"change",header:"涨幅",sortable:"",class:"min-w-20"},{body:u(({data:g})=>[s(J,{severity:Number(g.change.split("%")[0])>0?"success":"danger",class:"text-xs"},{default:u(()=>[L(v(g.change),1)]),_:2},1032,["severity"])]),_:1}),s(j,{field:"side",header:"方向",class:"min-w-22",showFilterMatchModes:!1,showApplyButton:!1,filterMenuClass:"w-10",pt:{filter:{class:"w-6 h-6  justify-center items-center ml-0"}}},{body:u(({data:g})=>[s(J,{severity:g.side===1?"success":"danger",class:"text-xs w-6 h-6 font-medium",size:"small",variant:"simple",rounded:""},{default:u(()=>[L(v(g.side===1?"多":"空"),1)]),_:2},1032,["severity"])]),filter:u(({filterModel:g,filterCallback:oe})=>[s(de,{modelValue:g.value,"onUpdate:modelValue":ae=>g.value=ae,options:f.value,optionLabel:"label",optionValue:"value",placeholder:"选择方向",showClear:"",onChange:ae=>oe()},{option:u(ae=>[s(J,{value:ae.option.label,severity:ae.option.value===1?"success":"danger",rounded:""},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1}),s(j,{field:"pos_u",header:"仓位价值",sortable:"",class:"min-w-28"}),s(j,{field:"pnl_u",header:"未实现盈亏",sortable:"",class:"min-w-30"}),s(j,{field:"avg_price",header:"均价",class:"min-w-15"}),s(j,{field:"cur_price",header:"当前价格",class:"min-w-20"})]),_:2},1032,["value","filters"])):(r(),c("div",Ys,n[20]||(n[20]=[t("img",{src:Z,class:"w-40 h-auto"},null,-1)])))],2),t("div",{class:I(["px-4 py-3 flex flex-col gap-3 bg-gray-50 dark:bg-neutral-900 rounded-lg",[i.value===e.id?"max-h-120":"min-w-full sm:min-w-100"]])},[n[23]||(n[23]=t("div",{class:"flex justify-center text-md"},"盈利/亏损币前五名",-1)),t("div",Js,[s(we,{modelValue:e.coinSortType,"onUpdate:modelValue":g=>e.coinSortType=g,options:K.value,size:"small"},null,8,["modelValue","onUpdate:modelValue","options"]),s(de,{modelValue:P.value,"onUpdate:modelValue":n[3]||(n[3]=g=>P.value=g),options:Y,optionLabel:"label",optionValue:"value",placeholder:"时间范围",size:"small"},null,8,["modelValue"])]),a(e).length>0?(r(),c("div",Gs,[t("div",Zs,[(r(!0),c(E,null,G(a(e),(g,oe)=>(r(),c("div",{key:g.symbol,class:"flex items-center gap-3 py-3 first:pt-0 last:pb-0"},[t("div",{class:I(["w-2 h-2 rounded-full",W.value[oe]||"bg-gray-500"])},null,2),t("div",Qs,[t("span",Xs,v(g.symbol),1),t("div",eo,v(g.type==="swap"?"合约持仓":"现货持仓"),1)]),t("div",to,[t("span",{class:I(g.total_pnl>0?"text-green-600":"text-red-600")},v(Number(g.total_pnl).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),3),n[21]||(n[21]=t("span",{class:"text-xs text-gray-500 dark:text-gray-300"}," USDT ",-1))])]))),128))])])):(r(),c("div",lo,n[22]||(n[22]=[t("img",{src:Z,class:"w-40 h-auto"},null,-1)]))),n[24]||(n[24]=t("div",{class:"text-xs text-gray-500 dark:text-gray-300 text-center"}," 开平仓币种数据可能还不准确，后续会优化 ",-1))],2),t("div",{class:I(["pt-3 flex flex-col gap-2 bg-gray-50 dark:bg-neutral-900 rounded-lg",[i.value===e.id?"max-h-120":""]])},[t("div",so,[n[26]||(n[26]=t("span",{class:"text-md hidden sm:block"}," 策略配置信息 ",-1)),e!=null&&e.strategy_name?(r(),c("div",oo,[n[25]||(n[25]=L(" 当前使用的策略是 ")),s(J,{class:"text-xs",severity:"secondary"},{default:u(()=>[L(v(e.strategy_name||"--"),1)]),_:2},1024)])):H("",!0)]),e!=null&&e.strategy_name?(r(),c("div",no,[s(ke,{value:(e==null?void 0:e.strategy_pool)||[],paginator:"",rows:5,class:"!bg-transparent flex-1 flex flex-col",pt:{tableContainer:{class:"flex-1"},table:{class:"text-xs !bg-transparent h-full"}},rowGroupMode:"rowspan",groupRowsBy:"name",center:!0},{empty:u(()=>n[28]||(n[28]=[t("div",{class:"flex items-center justify-center h-full"},[t("img",{src:Z,class:"w-40 h-full"})],-1)])),default:u(()=>[s(j,{field:"name",header:"策略"},{body:u(({data:g})=>[t("div",ao,[s(J,{class:"font-medium text-xs"},{default:u(()=>[L(v(g.name),1)]),_:2},1024)])]),_:1}),s(j,{field:"strategy",header:"子策略权重"},{body:u(({data:g})=>[t("div",ro,v(g.cap_weight.toFixed(2)*100)+"%"+v(g.strategy),1)]),_:1}),s(j,{field:"hold_period",header:"持仓周期"},{body:u(({data:g})=>[t("div",io,v(g.hold_period),1)]),_:1}),s(j,{field:"offset_list",header:"offset_list",class:"min-w-25"},{body:u(({data:g})=>[g.offset_list&&g.offset_list.length?(r(),c("div",uo,[(r(!0),c(E,null,G(g.offset_list.slice(0,3),(oe,ae)=>(r(),q(J,{key:oe,class:"font-medium text-xs",severity:"secondary"},{default:u(()=>[L(v(oe),1)]),_:2},1024))),128)),g.offset_list.length>3?A((r(),c("span",co,[L("+"+v(g.offset_list.length-3),1)])),[[ge,{value:`所有的offset：${g.offset_list.join(", ")}`,autoHide:!1},void 0,{bottom:!0}]]):H("",!0)])):H("",!0)]),_:2},1024),s(j,{field:"is_use_spot",header:"现货/合约模式"},{body:u(({data:g})=>[s(J,{class:"font-medium text-xs w-11",severity:g.is_use_spot?"success":"info"},{default:u(()=>[L(v(g.is_use_spot?"现货":"合约"),1)]),_:2},1032,["severity"])]),_:1}),s(j,{field:"long_cap_weight",header:"多头权重"},{body:u(({data:g})=>[t("div",po,v(g.long_cap_weight.toFixed(2)*100)+"% ",1)]),_:1}),s(j,{field:"short_cap_weight",header:"空头权重"},{body:u(({data:g})=>[t("div",fo,v(g.short_cap_weight.toFixed(2)*100)+"% ",1)]),_:1}),s(j,{field:"long_select_coin_num",header:"多头选币数量"},{body:u(({data:g})=>[t("div",go,v(g.long_select_coin_num),1)]),_:1}),s(j,{field:"short_select_coin_num",header:"空头选币数量"},{body:u(({data:g})=>[t("div",vo,v(g.short_select_coin_num),1)]),_:1}),s(j,{field:"factor_list",header:"因子/过滤因子/后置因子"},{body:u(({data:g})=>[t("div",yo,[s(N,{class:"text-xs w-34",size:"small",variant:"text",severity:"secondary",onClick:oe=>he(g.factor_list,g.filter_list,g.filter_list_post)},{default:u(()=>n[27]||(n[27]=[L(" 查看因子信息 ")])),_:2,__:[27]},1032,["onClick"])])]),_:1})]),_:2},1032,["value"])])):(r(),c("div",bo,n[29]||(n[29]=[t("img",{src:Z,class:"w-40 h-auto"},null,-1)])))],2)],2)]}),_:2},1032,["class","collapsed","onUpdate:collapsed","toggleable"]))),128)):(r(),c("div",xo,[t("div",mo,[n[30]||(n[30]=L(" 实盘交易暂时未启动，请去 ")),s(N,{label:"策略中心",variant:"text",class:"py-1 px-0",onClick:n[4]||(n[4]=e=>ee(0))}),n[31]||(n[31]=L("启动实盘 "))]),n[32]||(n[32]=t("img",{src:Z,class:"w-60 h-auto"},null,-1))]))],64))]),s(ht,{visible:x.value,"onUpdate:visible":n[7]||(n[7]=e=>x.value=e),closable:!1,modal:"",class:"w-[90vw] sm:w-[600px] max-w-full"},{footer:u(()=>[s(N,{label:"关闭",size:"small",severity:"secondary",variant:"outlined",onClick:n[6]||(n[6]=e=>x.value=!1)})]),default:u(()=>[t("div",ho,[s(we,{modelValue:k.value,"onUpdate:modelValue":n[5]||(n[5]=e=>k.value=e),options:w.value,size:"small",onValueChange:te},null,8,["modelValue","options"]),s(ke,{value:B.value,paginator:"",rows:5,class:"text-sm"},{empty:u(()=>n[38]||(n[38]=[t("div",{class:"flex items-center justify-center h-full"},[t("img",{src:Z,class:"w-40 h-auto"})],-1)])),default:u(()=>[s(j,{header:k.value==="因子"?"因子":k.value==="过滤因子"?"过滤因子":"后置因子",style:{width:"100px"}},{body:u(({data:e})=>[s(J,{class:"font-medium text-xs"},{default:u(()=>[L(v(e[0]),1)]),_:2},1024)]),_:1},8,["header"]),s(j,{header:k.value==="因子"?"排序方式":"因子参数",style:{width:"100px"}},{body:u(({data:e})=>[k.value==="因子"?(r(),c("div",_o,[e[1]?(r(),c("div",wo,n[33]||(n[33]=[t("span",null,"升序",-1),t("i",{class:"pi pi-arrow-up text-xs"},null,-1)]))):(r(),c("div",ko,n[34]||(n[34]=[t("span",null,"降序",-1),t("i",{class:"pi pi-arrow-down text-xs"},null,-1)])))])):(r(),c("div",$o,v(e[1]),1))]),_:1},8,["header"]),s(j,{header:k.value==="因子"?"因子参数":"因子使用条件",style:{width:"140px"}},{body:u(({data:e})=>[t("div",So,v(e[2]),1)]),_:1},8,["header"]),s(j,{header:k.value==="因子"?"因子权重":"排序方式",style:{width:"100px"}},{body:u(({data:e})=>[k.value==="因子"?(r(),c("div",Co,[t("div",Lo,v(e[3]),1)])):(r(),c("div",To,n[37]||(n[37]=[t("div",{class:"space-x-2"},[t("span",null,"升序"),t("i",{class:"pi pi-arrow-up text-xs"})],-1)])))]),_:1},8,["header"])]),_:1},8,["value"])])]),_:1},8,["visible"])],64)}}}),qo=Nt(zo,[["__scopeId","data-v-51c22f8e"]]),Do={class:"space-y-4 sm:space-y-6 px-2 py-1"},Bo={class:"flex items-center gap-2"},Oo={class:"font-bold text-xl text-primary-600"},Vo={class:"bg-primary-50 dark:bg-neutral-800 rounded px-4 py-3"},Fo={class:"space-y-3"},Po="2025-11-21",jo=re({__name:"versionUpdataLog.template",setup(l){const i=Mt().version,m={"0.3.0":["📊 首页监控状态增加 1 小时、24 小时盈利/亏损币前五名","⚡ 支持一键升级框架","📈 新增数据中心状态监控时间线","⏱ 资金曲线图、多空比例、多空选币支持滚动/拖拽切换时间范围","🧩 支持上传择时因子"],"0.4.0":["🛠 修复问题：修复已知 bug，整体运行更加稳定","📊 数据中心：新增升级功能，支持在线更新至最新版本","🔑 账号功能：支持多端同时登录，使用更灵活","💻 设备管理：全新设备管理页面，可查看历史登录设备，并支持一键下线","📦 框架迁移：新增导出/导入功能，快速迁移框架相关数据","📈 持仓数据：首页持仓支持字段排序与筛选，信息更清晰","🌐 网络状态：右上角新增网络延迟显示，实时掌握连接情况"],"0.5.0":["📈 杠杆范围：支持两位小数，参数设置更精细","🎨 策略兼容：适配「浪淘沙」填充逻辑，兼容更多策略模板","📥 策略导入：支持选币策略导入","🧩 监控开关：账户监控与下架监控支持自定义启用，灵活控制运行","🕒 数据筛选：首页账户数据支持按时间范围筛选，查看更便捷","🧪 模式扩展：新增“模拟实盘”模式","🔐 安全增强：API Key 与密钥支持加密开关，自主控制数据安全级别","📐 界面优化：整体页面布局升级，交互体验更流畅"]},h=_(!1);fe(()=>{localStorage.getItem("lastReadVersion")!==i&&(h.value=!0)});const d=()=>{h.value=!1,localStorage.setItem("lastReadVersion",i)};return(x,f)=>{const T=ie,k=me;return r(),q(k,{visible:h.value,"onUpdate:visible":f[0]||(f[0]=w=>h.value=w),modal:!0,closable:!1,draggable:!1,"show-header":!1,class:"max-w-[90vw] min-w-[40vw]",pt:{content:{class:"pt-5"}}},{footer:u(()=>[s(T,{label:"已阅",onClick:d,autofocus:"",class:"w-full"})]),default:u(()=>[t("div",Do,[t("div",Bo,[f[1]||(f[1]=t("i",{class:"pi pi-gift text-primary-600 text-2xl"},null,-1)),t("span",Oo,"公测版本 "+v(D(i)),1),t("span",{class:"ml-auto text-xs text-gray-400"},v(Po))]),t("div",Vo,[f[2]||(f[2]=t("div",{class:"font-semibold text-base text-primary-600 dark:text-primary-300 mb-3"}," 本次更新内容： ",-1)),t("ul",Fo,[(r(!0),c(E,null,G(m[D(i)],(w,B)=>(r(),c("li",{key:B,class:"flex items-start gap-2"},[t("span",null,v(w),1)]))),128))])])])]),_:1},8,["visible"])}}}),Ao={class:"h-full w-full p-2 sm:p-6 space-y-3 flex flex-col"},Io={class:"flex gap-3"},en=re({__name:"home.page",setup(l){const o=_(null),i=_(!1),m=_([]),h=_(""),d=_(""),x=_(null);fe(async()=>{f()});const f=()=>{k(),T()},T=async()=>{i.value=!0;try{const w=await Ot();if(w.result===!0&&w.data.length>0){m.value=JSON.parse(JSON.stringify(w.data)).filter(O=>O.type!=="data_center").reverse();let B=JSON.parse(JSON.stringify(w.data));if(B=B.filter(O=>O.type==="data_center").sort((O,P)=>new Date(P.time).getTime()-new Date(O.time).getTime()),h.value=B[0].framework_id,d.value=B[0].framework_name,w.data[0].status===Vt.finished){i.value=!1,o.value&&o.value.startFrameWorkRunStatusTimer();return}}}catch{return}i.value&&(x.value=setTimeout(T,3e3))},k=()=>{x.value&&(clearTimeout(x.value),x.value=null)};return be(()=>{k()}),Le(()=>{k()}),(w,B)=>(r(),c("div",Ao,[t("div",Io,[s(dl,{ref_key:"refDataCenterModuleTemplate",ref:o,currentNewFrameWorkId:h.value,frameWorkName:d.value,downloadIsLoading:i.value},null,8,["currentNewFrameWorkId","frameWorkName","downloadIsLoading"]),s(Wl,{downloadIsLoading:i.value,frameWorkList:m.value},null,8,["downloadIsLoading","frameWorkList"])]),s(qo),s(jo)]))}});export{en as default};
