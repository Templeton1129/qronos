import{g as re,q as dt,h as _,N as be,S as Le,b as c,F as K,i as s,n as R,w as u,o as r,j as t,y as I,e as Y,A as F,d as D,t as v,D as L,I as fe,x as _t,k as Z,C as ut,c as Te,B as ze,P as qe,r as X,m as H,f as wt,z as kt,T as $t,U as De,s as St,a as Be,V as rt,W as Ct,X as Se,Y as ve,Z as Lt,u as Tt,v as it}from"./index-DbB14CKm.js";import{T as xe}from"./index-BuJupokE.js";import{s as me,a as Fe,b as zt}from"./index-oUEh44lC.js";import{s as ct}from"./index-C4uR4OqR.js";import{s as Oe,_ as Q}from"./no-data-P8oZnla3.js";import{f as q,h as pt,j as ee,s as ie,k as ft,m as qt,n as Dt,o as Bt,p as Ft,q as Ot}from"./index-B_GZmL3k.js";import{d as ye}from"./index-CkHj5rSV.js";import{_ as Vt,a as Pt}from"./strategicNetValueChart.template.vue_vue_type_script_setup_true_lang-9njoQddC.js";import{c as jt,d as gt}from"./index-Pqloj2nT.js";import{s as At}from"./index-DCjXDbvw.js";import{s as It,a as Wt}from"./index-D8JLJnMc.js";import{s as Nt}from"./index-C2lAUxNt.js";import{_ as Rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Mt}from"./user-BXAfuHw2.js";const Ut={class:"flex items-center justify-between"},Et={key:0,class:"flex gap-6 items-center"},Ht={class:"flex flex-col gap-2"},Kt={key:1,class:"flex gap-2 lg:gap-4 items-center"},Yt={class:"text-xs flex flex-col gap-1"},Jt={class:"text-sm font-bold"},Gt={class:"flex items-center"},Zt={class:"flex items-center"},Qt={class:"flex items-center"},Xt={key:0,class:"flex gap-6 items-center"},el={class:"flex flex-col gap-2"},tl={key:1,class:"flex flex-col gap-6"},ll={class:"flex justify-center"},sl={class:"text-xs flex flex-col gap-2 items-center"},ol={class:"text-sm font-bold"},nl={class:"space-y-2"},al={class:"flex items-center"},rl={class:"flex items-center"},il={class:"flex items-center"},dl=re({__name:"dataCenterModule.template",props:{currentNewFrameWorkId:{},frameWorkName:{},downloadIsLoading:{type:Boolean}},setup(l,{expose:n}){const i=dt(),m=l,h=_(!1),d=_(q.stop),x=_(!1),f=_(null),T=_([]),k=_(!1),w=_(null),O=()=>{P(),V()},V=async()=>{x.value=!0;try{const z=await pt();if(z.result===!0&&z.data&&z.data.length>0){T.value=z.data;const y=z.data.find(W=>W.framework_id===m.currentNewFrameWorkId);if(y){if(y.status===ee.online||y.status===ee.stopped||y.status===ee.errored){x.value=!1,w.value=y,d.value=y.status===ee.online?q.start:q.stop;return}}else{x.value=!1;return}}else{x.value=!1;return}}catch{x.value=!1;return}f.value=setTimeout(V,1e3)},P=()=>{f.value&&(clearTimeout(f.value),f.value=null)},M=async z=>{x.value=!0;const y=await ft({framework_id:m.currentNewFrameWorkId,pm_id:null,type:z});y.result?(i.add({severity:"success",summary:"操作成功",life:2e3}),O()):i.add({severity:"error",summary:"操作失败",detail:y.msg,life:3e3})};return be(()=>{P()}),Le(()=>{P()}),n({startFrameWorkRunStatusTimer:O}),(z,y)=>{const W=ie,j=Oe,B=Fe,J=ct,N=me,$=xe;return r(),c(K,null,[s(J,{class:R(["hidden sm:flex flex-1",[h.value===!0?"w-screen h-screen fixed inset-0 z-50 bg-white dark:bg-neutral-900 p-4 flex flex-col rounded-none":""]]),pt:{body:{class:"px-4 py-3"}}},{title:u(()=>[t("div",Ut,[y[8]||(y[8]=t("div",{class:"flex items-center gap-2"},[t("i",{class:"pi pi-database"}),t("span",{class:"text-lg font-bold"},"数据中心")],-1)),h.value===!1?I((r(),D(W,{key:0,icon:"pi pi-window-maximize",text:"",rounded:"",severity:"secondary",size:"small",onClick:y[0]||(y[0]=()=>h.value=!0)},null,512)),[[$,"全屏显示"]]):I((r(),D(W,{key:1,icon:"pi pi-window-minimize",text:"",rounded:"",severity:"secondary",size:"small",onClick:y[1]||(y[1]=()=>h.value=!1)},null,512)),[[$,"退出全屏"]])])]),content:u(()=>[z.downloadIsLoading?(r(),c("div",Et,[s(j,{shape:"circle",width:"5rem",height:"5rem",class:"mr-4"}),t("div",Ht,[s(j,{width:"8rem",height:"1.5rem"}),s(j,{width:"6rem",height:"1.5rem"}),s(j,{width:"10rem",height:"1.5rem"})])])):(r(),c("div",Kt,[d.value===F(q).stop?I((r(),D(W,{key:0,class:"w-20 h-20 hover:scale-105 transition-transform duration-300 flex-shrink-0",onClick:y[2]||(y[2]=o=>M(F(q).start)),icon:"pi pi-caret-right",iconClass:"text-3xl",rounded:"",raised:"",severity:"success",disabled:x.value},null,8,["disabled"])),[[$,"启动数据中心"]]):Y("",!0),d.value===F(q).start?I((r(),D(W,{key:1,class:"w-20 h-20 hover:scale-105 transition-transform duration-300 flex-shrink-0",onClick:y[3]||(y[3]=o=>M(F(q).stop)),icon:"pi pi-stop-circle",iconClass:"text-3xl",rounded:"",raised:"",severity:"danger",disabled:x.value},null,8,["disabled"])),[[$,"停止数据中心"]]):Y("",!0),t("div",Yt,[t("div",Jt,v(z.frameWorkName),1),t("div",Gt,[y[9]||(y[9]=t("span",{class:"w-16 text-left"},"内存占用:",-1)),s(B,{class:"text-xs font-medium"},{default:u(()=>{var o;return[L(v(((o=w.value)==null?void 0:o.mem_usage)||"_"),1)]}),_:1})]),t("div",Zt,[y[10]||(y[10]=t("span",{class:"w-16 text-left"},"cpu占用:",-1)),s(B,{class:"text-xs font-medium"},{default:u(()=>{var o;return[L(v(((o=w.value)==null?void 0:o.cpu_usage)||"_"),1)]}),_:1})]),t("div",Qt,[y[11]||(y[11]=t("span",{class:"w-16 text-left"},"启动时间:",-1)),s(B,{class:"text-xs font-medium"},{default:u(()=>{var o,p;return[L(v((o=w.value)!=null&&o.pm_uptime?F(ye)((p=w.value)==null?void 0:p.pm_uptime).format("YYYY-MM-DD HH:mm:ss"):"--"),1)]}),_:1})])])]))]),_:1},8,["class"]),s(J,{class:"sm:hidden flex-1"},{content:u(()=>[t("div",{class:"font-bold text-center flex items-center justify-center gap-2",onClick:y[4]||(y[4]=()=>k.value=!0)},y[12]||(y[12]=[t("i",{class:"pi pi-database"},null,-1),t("span",null,"数据中心控制",-1)]))]),_:1}),s(N,{visible:k.value,"onUpdate:visible":y[7]||(y[7]=o=>k.value=o),header:"数据中心控制",modal:"",class:"hidden sm:block w-[90vw] sm:w-[600px] max-w-full"},{default:u(()=>[z.downloadIsLoading?(r(),c("div",Xt,[s(j,{shape:"circle",width:"5rem",height:"5rem",class:"mr-4"}),t("div",el,[s(j,{width:"8rem",height:"1.5rem"}),s(j,{width:"6rem",height:"1.5rem"}),s(j,{width:"10rem",height:"1.5rem"})])])):(r(),c("div",tl,[t("div",ll,[d.value===F(q).stop?I((r(),D(W,{key:0,class:"w-20 h-20 hover:scale-105 transition-transform duration-300",onClick:y[5]||(y[5]=o=>M(F(q).start)),icon:"pi pi-caret-right",iconClass:"text-3xl",rounded:"",raised:"",severity:"success",disabled:x.value},null,8,["disabled"])),[[$,"启动数据中心"]]):Y("",!0),d.value===F(q).start?I((r(),D(W,{key:1,class:"w-20 h-20 hover:scale-105 transition-transform duration-300",onClick:y[6]||(y[6]=o=>M(F(q).stop)),icon:"pi pi-stop-circle",iconClass:"text-3xl",rounded:"",raised:"",severity:"danger",disabled:x.value},null,8,["disabled"])),[[$,"停止数据中心"]]):Y("",!0)]),t("div",sl,[t("div",ol,v(z.frameWorkName),1),t("div",nl,[t("div",al,[y[13]||(y[13]=t("span",{class:"w-16 text-left"},"内存占用:",-1)),s(B,{class:"text-xs font-medium"},{default:u(()=>{var o;return[L(v(((o=w.value)==null?void 0:o.mem_usage)||"_"),1)]}),_:1})]),t("div",rl,[y[14]||(y[14]=t("span",{class:"w-16 text-left"},"cpu占用:",-1)),s(B,{class:"text-xs font-medium"},{default:u(()=>{var o;return[L(v(((o=w.value)==null?void 0:o.cpu_usage)||"_"),1)]}),_:1})]),t("div",il,[y[15]||(y[15]=t("span",{class:"w-16 text-left"},"启动时间:",-1)),s(B,{class:"text-xs font-medium"},{default:u(()=>{var o,p;return[L(v((o=w.value)!=null&&o.pm_uptime?F(ye)((p=w.value)==null?void 0:p.pm_uptime).format("YYYY-MM-DD HH:mm:ss"):"--"),1)]}),_:1})])])])]))]),_:1},8,["visible"])],64)}}}),ul={class:"flex items-center justify-between"},cl={key:0,class:"flex flex-col gap-3 pr-4"},pl={class:"flex flex-col gap-1 pl-2"},fl={class:"flex items-center gap-2"},gl={class:"flex flex-col gap-1 pl-2"},vl={class:"text-sm flex items-center gap-1"},yl={key:0,class:"relative flex h-3 w-3 items-center justify-center"},bl={key:1,class:"rounded-full h-2 w-2 bg-gray-300"},xl={class:"text-xs flex gap-2"},ml={class:"flex items-center gap-2"},hl={class:"flex items-center gap-2"},_l={class:"flex items-center gap-2"},wl={class:"flex items-center gap-2"},kl={key:1},$l={class:"text-sm flex items-center"},Sl={key:0,class:"flex flex-col gap-3 pr-4"},Cl={class:"flex flex-col gap-1 pl-2"},Ll={class:"flex items-center gap-2"},Tl={key:0,class:"flex flex-col gap-2 pr-4"},zl={class:"flex flex-col gap-2 pl-2"},ql={class:"text-sm flex items-center gap-1"},Dl={key:0,class:"relative flex h-3 w-3 items-center justify-center"},Bl={key:1,class:"rounded-full h-2 w-2 bg-gray-300"},Fl={class:"text-xs flex gap-2 flex-wrap pl-3"},Ol={class:"flex items-center"},Vl={class:"flex items-center"},Pl={class:"flex items-center"},jl={class:"flex items-center gap-2"},Al={key:1},Il={class:"text-sm flex items-center"},Wl=re({__name:"strategyCenterModule.template",props:{downloadIsLoading:{type:Boolean},frameWorkList:{}},setup(l){const n=_(null),i=ut(),m=_(!1),h=_(!1),d=_(!0),x=_([]),f=l,T=dt(),k=_(null),w=_([]),O=_({is_simulate:"debug",error_webhook_url:"",factor_col_limit:64,is_encrypt:!1}),V=_(null);fe(async()=>{f.frameWorkList&&f.frameWorkList.length>0&&P()}),_t(()=>f.frameWorkList,$=>{$&&$.length>0&&P()},{immediate:!0});const P=()=>{z(),M()},M=async()=>{d.value=!0,w.value=JSON.parse(JSON.stringify(f.frameWorkList));try{const $=await pt();if($.result===!0&&$.data&&$.data.length>0){x.value=$.data;let o=!1;for(let p of $.data)if(p.status===ee.starting||p.status===ee.stopping||p.status===ee.restarting){o=!0;break}if(o===!1){d.value=!1;for(let p of w.value){const S=x.value.find(U=>U.framework_id===p.framework_id&&U.name==="startup");p.status=(S==null?void 0:S.status)===ee.online?q.start:q.stop,p.pm_uptime=(S==null?void 0:S.pm_uptime)||null,p.cpu_usage=(S==null?void 0:S.cpu_usage)||null,p.mem_usage=(S==null?void 0:S.mem_usage)||null}return}}else{d.value=!1;for(let o of w.value){const p=x.value.find(S=>S.framework_id===o.framework_id&&S.name==="startup");o.status=(p==null?void 0:p.status)===ee.online?q.start:q.stop,o.pm_uptime=(p==null?void 0:p.pm_uptime)||null,o.cpu_usage=(p==null?void 0:p.cpu_usage)||null,o.mem_usage=(p==null?void 0:p.mem_usage)||null}return}}catch{return}k.value=setTimeout(()=>{M()},1e3)},z=()=>{k.value&&(clearTimeout(k.value),k.value=null)},y=async $=>{var p,S,U,te;const o=await Dt($);o.result===!0&&(O.value.is_simulate=((p=o.data)==null?void 0:p.is_simulate)||"debug",O.value.error_webhook_url=((S=o.data)==null?void 0:S.error_webhook_url)||"",O.value.factor_col_limit=((U=o.data)==null?void 0:U.factor_col_limit)||64,O.value.is_encrypt=((te=o.data)==null?void 0:te.is_encrypt)||!1)},W=$=>{const o=x.value.find(p=>p.framework_id===$&&p.name==="startup");return(o==null?void 0:o.pm_id)||null},j=async($,o)=>{var p;if(o===q.start){const S=await qt($);if(!S.result||S.data==null||S.data.length==0){T.add({severity:"warn",summary:"请先增加账户,导入策略,完成配置!",life:3e3});return}}if(await y($),O.value.is_encrypt===!0&&o===q.start&&n.value){V.value={status:o,frameWorkId:$},(p=n.value)==null||p.openDialog();return}B($,o)},B=async($,o,p="")=>{let S={framework_id:$,pm_id:W($),type:o};p&&(S.secret_key=p);const U=await ft(S);V.value=null,U.result?(T.add({severity:"success",summary:"操作成功",life:2e3}),P()):T.add({severity:"error",summary:"操作失败",detail:U.msg,life:3e3})},J=$=>{if(!V.value){T.add({severity:"error",summary:"操作失败",detail:"未找到待执行的操作",life:3e3});return}const{status:o,frameWorkId:p}=V.value;B(p,o,$)},N=($=0)=>{i.push({path:`/strategyCenter/${$}`})};return be(()=>{z()}),Le(()=>{z()}),($,o)=>{const p=ie,S=Oe,U=Fe,te=ct,he=me,le=xe;return r(),c(K,null,[s(te,{class:R(["hidden sm:flex flex-2",[m.value===!0?"w-screen h-screen fixed inset-0 z-50 bg-white dark:bg-neutral-900 p-4 flex flex-col rounded-none":""]]),pt:{body:{class:"px-4 py-3"}}},{title:u(()=>[t("div",ul,[o[7]||(o[7]=t("div",{class:"flex items-center gap-2"},[t("i",{class:"pi pi-chart-scatter"}),t("span",{class:"text-lg font-bold"},"策略中心")],-1)),m.value===!1?I((r(),D(p,{key:0,icon:"pi pi-window-maximize",text:"",rounded:"",severity:"secondary",size:"small",onClick:o[0]||(o[0]=()=>m.value=!0)},null,512)),[[le,"全屏显示"]]):I((r(),D(p,{key:1,icon:"pi pi-window-minimize",text:"",rounded:"",severity:"secondary",size:"small",onClick:o[1]||(o[1]=()=>m.value=!1)},null,512)),[[le,"退出全屏"]])])]),content:u(()=>[d.value?(r(),c("div",cl,[(r(),c(K,null,Z(2,b=>t("div",{key:b,class:"flex items-center justify-between"},[t("div",pl,[s(S,{width:"120px",height:"20px"}),s(S,{width:"80px",height:"14px"})]),t("div",fl,[s(S,{shape:"circle",width:"32px",height:"32px"}),s(S,{shape:"circle",width:"32px",height:"32px"})])])),64))])):(r(),c(K,{key:1},[w.value&&w.value.length>0?(r(),c("div",{key:0,class:R(["flex flex-col gap-2 pr-4",[m.value===!1?"max-h-[108px] overflow-y-auto":""]])},[(r(!0),c(K,null,Z(w.value,(b,C)=>(r(),c("div",{key:C,class:"flex items-center justify-between"},[t("div",gl,[t("div",vl,[b.status===F(q).start?(r(),c("span",yl,o[8]||(o[8]=[t("span",{class:"animate-ping absolute inline-flex h-2.5 w-2.5 rounded-full bg-green-500 opacity-75"},null,-1),t("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-green-500"},null,-1)]))):(r(),c("span",bl)),t("span",null,v(b.framework_name),1)]),t("div",xl,[t("div",ml,[o[9]||(o[9]=t("span",null,"内存占用:",-1)),s(U,{class:"text-xs font-medium"},{default:u(()=>[L(v((b==null?void 0:b.mem_usage)||"_"),1)]),_:2},1024)]),t("div",hl,[o[10]||(o[10]=t("span",null,"cpu占用:",-1)),s(U,{class:"text-xs font-medium"},{default:u(()=>[L(v((b==null?void 0:b.cpu_usage)||"_"),1)]),_:2},1024)]),t("div",_l,[o[11]||(o[11]=t("span",null,"启动时间:",-1)),s(U,{class:"text-xs font-medium"},{default:u(()=>[L(v(b!=null&&b.pm_uptime?F(ye)(b==null?void 0:b.pm_uptime).format("YYYY-MM-DD HH:mm:ss"):"--"),1)]),_:2},1024)])])]),t("div",wl,[s(p,{icon:"pi pi-cog",text:"",rounded:"",size:"small",onClick:a=>N(b.id)},null,8,["onClick"]),b.status===F(q).stop?I((r(),D(p,{key:0,onClick:a=>j(b.framework_id,F(q).start),icon:"pi pi-caret-right",rounded:"",raised:"",disabled:d.value,size:"small",class:"hover:scale-105 transition-transform duration-300"},null,8,["onClick","disabled"])),[[le,"启动"]]):Y("",!0),b.status===F(q).start?I((r(),D(p,{key:1,onClick:a=>j(b.framework_id,F(q).stop),icon:"pi pi-stop-circle","icon-class":"text-red-500",rounded:"",raised:"",disabled:d.value,size:"small",class:"hover:scale-105 transition-transform duration-300 bg-white dark:bg-neutral-700 border-1 border-neutral-300 dark:border-neutral-600"},null,8,["onClick","disabled"])),[[le,"停止"]]):Y("",!0)])]))),128))],2)):(r(),c("div",kl,[t("div",$l,[o[12]||(o[12]=t("span",null,"你目前暂无框架，请先",-1)),s(p,{size:"small",variant:"outlined",text:"",class:"p-1 text-sm",label:"新增框架",onClick:o[2]||(o[2]=b=>N())}),o[13]||(o[13]=L(" ！ "))])]))],64))]),_:1},8,["class"]),s(te,{class:"sm:hidden flex-1"},{content:u(()=>[t("div",{class:"font-bold text-center flex items-center justify-center gap-2",onClick:o[3]||(o[3]=()=>h.value=!0)},o[14]||(o[14]=[t("i",{class:"pi pi-chart-scatter"},null,-1),t("span",null,"策略中心控制",-1)]))]),_:1}),s(he,{visible:h.value,"onUpdate:visible":o[5]||(o[5]=b=>h.value=b),header:"策略中心控制",modal:"",class:"hidden sm:block w-[90vw] sm:w-[600px] max-w-full"},{default:u(()=>[d.value?(r(),c("div",Sl,[(r(),c(K,null,Z(2,b=>t("div",{key:b,class:"flex items-center justify-between"},[t("div",Cl,[s(S,{width:"120px",height:"20px"}),s(S,{width:"80px",height:"14px"})]),t("div",Ll,[s(S,{shape:"circle",width:"32px",height:"32px"}),s(S,{shape:"circle",width:"32px",height:"32px"})])])),64))])):(r(),c(K,{key:1},[w.value&&w.value.length>0?(r(),c("div",Tl,[(r(!0),c(K,null,Z(w.value,(b,C)=>(r(),c("div",{key:C,class:"flex items-center justify-between"},[t("div",zl,[t("div",ql,[b.status===F(q).start?(r(),c("span",Dl,o[15]||(o[15]=[t("span",{class:"animate-ping absolute inline-flex h-2.5 w-2.5 rounded-full bg-green-500 opacity-75"},null,-1),t("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-green-500"},null,-1)]))):(r(),c("span",Bl)),t("span",null,v(b.framework_name),1)]),t("div",Fl,[t("div",Ol,[o[16]||(o[16]=t("span",{class:"w-16"},"内存占用:",-1)),s(U,{class:"text-xs font-medium"},{default:u(()=>[L(v((b==null?void 0:b.mem_usage)||"_"),1)]),_:2},1024)]),t("div",Vl,[o[17]||(o[17]=t("span",{class:"w-16"},"cpu占用:",-1)),s(U,{class:"text-xs font-medium"},{default:u(()=>[L(v((b==null?void 0:b.cpu_usage)||"_"),1)]),_:2},1024)]),t("div",Pl,[o[18]||(o[18]=t("span",{class:"w-16"},"启动时间:",-1)),s(U,{class:"text-xs font-medium"},{default:u(()=>[L(v(b!=null&&b.pm_uptime?F(ye)(b==null?void 0:b.pm_uptime).format("YYYY-MM-DD HH:mm:ss"):"--"),1)]),_:2},1024)])])]),t("div",jl,[s(p,{icon:"pi pi-cog",text:"",rounded:"",size:"small",onClick:a=>N(b.id)},null,8,["onClick"]),b.status===F(q).stop?I((r(),D(p,{key:0,onClick:a=>j(b.framework_id,F(q).start),icon:"pi pi-caret-right",rounded:"",raised:"",disabled:d.value,size:"small",class:"hover:scale-105 transition-transform duration-300"},null,8,["onClick","disabled"])),[[le,"启动"]]):Y("",!0),b.status===F(q).start?I((r(),D(p,{key:1,onClick:a=>j(b.framework_id,F(q).stop),icon:"pi pi-stop-circle","icon-class":"text-red-500",rounded:"",raised:"",disabled:d.value,size:"small",class:"hover:scale-105 transition-transform duration-300 bg-white dark:bg-neutral-700 border-0"},null,8,["onClick","disabled"])),[[le,"停止"]]):Y("",!0)])]))),128))])):(r(),c("div",Al,[t("div",Il,[o[19]||(o[19]=t("span",null,"你目前暂无框架，请先",-1)),s(p,{size:"small",variant:"outlined",text:"",class:"p-1 text-sm",label:"新增框架",onClick:o[4]||(o[4]=b=>N())}),o[20]||(o[20]=L(" ！ "))])]))],64))]),_:1},8,["visible"]),s(Vt,{ref_key:"refInputEncryptedPwdDialogTmpl",ref:n,onConfirm:J,onCancel:o[6]||(o[6]=b=>V.value=null)},null,512)],64)}}});var Nl=Te`
    .p-panel {
        border: 1px solid dt('panel.border.color');
        border-radius: dt('panel.border.radius');
        background: dt('panel.background');
        color: dt('panel.color');
    }

    .p-panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: dt('panel.header.padding');
        background: dt('panel.header.background');
        color: dt('panel.header.color');
        border-style: solid;
        border-width: dt('panel.header.border.width');
        border-color: dt('panel.header.border.color');
        border-radius: dt('panel.header.border.radius');
    }

    .p-panel-toggleable .p-panel-header {
        padding: dt('panel.toggleable.header.padding');
    }

    .p-panel-title {
        line-height: 1;
        font-weight: dt('panel.title.font.weight');
    }

    .p-panel-content {
        padding: dt('panel.content.padding');
    }

    .p-panel-footer {
        padding: dt('panel.footer.padding');
    }
`,Rl={root:function(n){var i=n.props;return["p-panel p-component",{"p-panel-toggleable":i.toggleable}]},header:"p-panel-header",title:"p-panel-title",headerActions:"p-panel-header-actions",pcToggleButton:"p-panel-toggle-button",contentContainer:"p-panel-content-container",content:"p-panel-content",footer:"p-panel-footer"},Ml=ze.extend({name:"panel",style:Nl,classes:Rl}),Ul={name:"BasePanel",extends:St,props:{header:String,toggleable:Boolean,collapsed:Boolean,toggleButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}}},style:Ml,provide:function(){return{$pcPanel:this,$parentInstance:this}}},vt={name:"Panel",extends:Ul,inheritAttrs:!1,emits:["update:collapsed","toggle"],data:function(){return{d_collapsed:this.collapsed}},watch:{collapsed:function(n){this.d_collapsed=n}},methods:{toggle:function(n){this.d_collapsed=!this.d_collapsed,this.$emit("update:collapsed",this.d_collapsed),this.$emit("toggle",{originalEvent:n,value:this.d_collapsed})},onKeyDown:function(n){(n.code==="Enter"||n.code==="NumpadEnter"||n.code==="Space")&&(this.toggle(n),n.preventDefault())}},computed:{buttonAriaLabel:function(){return this.toggleButtonProps&&this.toggleButtonProps.ariaLabel?this.toggleButtonProps.ariaLabel:this.header},dataP:function(){return Be({toggleable:this.toggleable})}},components:{PlusIcon:At,MinusIcon:jt,Button:ie},directives:{ripple:De}},El=["data-p"],Hl=["data-p"],Kl=["id"],Yl=["id","aria-labelledby"];function Jl(l,n,i,m,h,d){var x=qe("Button");return r(),c("div",H({class:l.cx("root"),"data-p":d.dataP},l.ptmi("root")),[t("div",H({class:l.cx("header"),"data-p":d.dataP},l.ptm("header")),[X(l.$slots,"header",{id:l.$id+"_header",class:R(l.cx("title"))},function(){return[l.header?(r(),c("span",H({key:0,id:l.$id+"_header",class:l.cx("title")},l.ptm("title")),v(l.header),17,Kl)):Y("",!0)]}),t("div",H({class:l.cx("headerActions")},l.ptm("headerActions")),[X(l.$slots,"icons"),l.toggleable?X(l.$slots,"togglebutton",{key:0,collapsed:h.d_collapsed,toggleCallback:function(T){return d.toggle(T)},keydownCallback:function(T){return d.onKeyDown(T)}},function(){return[s(x,H({id:l.$id+"_header",class:l.cx("pcToggleButton"),"aria-label":d.buttonAriaLabel,"aria-controls":l.$id+"_content","aria-expanded":!h.d_collapsed,unstyled:l.unstyled,onClick:n[0]||(n[0]=function(f){return d.toggle(f)}),onKeydown:n[1]||(n[1]=function(f){return d.onKeyDown(f)})},l.toggleButtonProps,{pt:l.ptm("pcToggleButton")}),{icon:u(function(f){return[X(l.$slots,l.$slots.toggleicon?"toggleicon":"togglericon",{collapsed:h.d_collapsed},function(){return[(r(),D(wt(h.d_collapsed?"PlusIcon":"MinusIcon"),H({class:f.class},l.ptm("pcToggleButton").icon),null,16,["class"]))]})]}),_:3},16,["id","class","aria-label","aria-controls","aria-expanded","unstyled","pt"])]}):Y("",!0)],16)],16,Hl),s($t,H({name:"p-toggleable-content"},l.ptm("transition")),{default:u(function(){return[I(t("div",H({id:l.$id+"_content",class:l.cx("contentContainer"),role:"region","aria-labelledby":l.$id+"_header"},l.ptm("contentContainer")),[t("div",H({class:l.cx("content")},l.ptm("content")),[X(l.$slots,"default")],16),l.$slots.footer?(r(),c("div",H({key:0,class:l.cx("footer")},l.ptm("footer")),[X(l.$slots,"footer")],16)):Y("",!0)],16,Yl),[[kt,!h.d_collapsed]])]}),_:3},16)],16,El)}vt.render=Jl;var Gl=Te`
    .p-togglebutton {
        display: inline-flex;
        cursor: pointer;
        user-select: none;
        overflow: hidden;
        position: relative;
        color: dt('togglebutton.color');
        background: dt('togglebutton.background');
        border: 1px solid dt('togglebutton.border.color');
        padding: dt('togglebutton.padding');
        font-size: 1rem;
        font-family: inherit;
        font-feature-settings: inherit;
        transition:
            background dt('togglebutton.transition.duration'),
            color dt('togglebutton.transition.duration'),
            border-color dt('togglebutton.transition.duration'),
            outline-color dt('togglebutton.transition.duration'),
            box-shadow dt('togglebutton.transition.duration');
        border-radius: dt('togglebutton.border.radius');
        outline-color: transparent;
        font-weight: dt('togglebutton.font.weight');
    }

    .p-togglebutton-content {
        display: inline-flex;
        flex: 1 1 auto;
        align-items: center;
        justify-content: center;
        gap: dt('togglebutton.gap');
        padding: dt('togglebutton.content.padding');
        background: transparent;
        border-radius: dt('togglebutton.content.border.radius');
        transition:
            background dt('togglebutton.transition.duration'),
            color dt('togglebutton.transition.duration'),
            border-color dt('togglebutton.transition.duration'),
            outline-color dt('togglebutton.transition.duration'),
            box-shadow dt('togglebutton.transition.duration');
    }

    .p-togglebutton:not(:disabled):not(.p-togglebutton-checked):hover {
        background: dt('togglebutton.hover.background');
        color: dt('togglebutton.hover.color');
    }

    .p-togglebutton.p-togglebutton-checked {
        background: dt('togglebutton.checked.background');
        border-color: dt('togglebutton.checked.border.color');
        color: dt('togglebutton.checked.color');
    }

    .p-togglebutton-checked .p-togglebutton-content {
        background: dt('togglebutton.content.checked.background');
        box-shadow: dt('togglebutton.content.checked.shadow');
    }

    .p-togglebutton:focus-visible {
        box-shadow: dt('togglebutton.focus.ring.shadow');
        outline: dt('togglebutton.focus.ring.width') dt('togglebutton.focus.ring.style') dt('togglebutton.focus.ring.color');
        outline-offset: dt('togglebutton.focus.ring.offset');
    }

    .p-togglebutton.p-invalid {
        border-color: dt('togglebutton.invalid.border.color');
    }

    .p-togglebutton:disabled {
        opacity: 1;
        cursor: default;
        background: dt('togglebutton.disabled.background');
        border-color: dt('togglebutton.disabled.border.color');
        color: dt('togglebutton.disabled.color');
    }

    .p-togglebutton-label,
    .p-togglebutton-icon {
        position: relative;
        transition: none;
    }

    .p-togglebutton-icon {
        color: dt('togglebutton.icon.color');
    }

    .p-togglebutton:not(:disabled):not(.p-togglebutton-checked):hover .p-togglebutton-icon {
        color: dt('togglebutton.icon.hover.color');
    }

    .p-togglebutton.p-togglebutton-checked .p-togglebutton-icon {
        color: dt('togglebutton.icon.checked.color');
    }

    .p-togglebutton:disabled .p-togglebutton-icon {
        color: dt('togglebutton.icon.disabled.color');
    }

    .p-togglebutton-sm {
        padding: dt('togglebutton.sm.padding');
        font-size: dt('togglebutton.sm.font.size');
    }

    .p-togglebutton-sm .p-togglebutton-content {
        padding: dt('togglebutton.content.sm.padding');
    }

    .p-togglebutton-lg {
        padding: dt('togglebutton.lg.padding');
        font-size: dt('togglebutton.lg.font.size');
    }

    .p-togglebutton-lg .p-togglebutton-content {
        padding: dt('togglebutton.content.lg.padding');
    }
`,Zl={root:function(n){var i=n.instance,m=n.props;return["p-togglebutton p-component",{"p-togglebutton-checked":i.active,"p-invalid":i.$invalid,"p-togglebutton-sm p-inputfield-sm":m.size==="small","p-togglebutton-lg p-inputfield-lg":m.size==="large"}]},content:"p-togglebutton-content",icon:"p-togglebutton-icon",label:"p-togglebutton-label"},Ql=ze.extend({name:"togglebutton",style:Gl,classes:Zl}),Xl={name:"BaseToggleButton",extends:gt,props:{onIcon:String,offIcon:String,onLabel:{type:String,default:"Yes"},offLabel:{type:String,default:"No"},iconPos:{type:String,default:"left"},readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null},size:{type:String,default:null}},style:Ql,provide:function(){return{$pcToggleButton:this,$parentInstance:this}}};function pe(l){"@babel/helpers - typeof";return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pe(l)}function es(l,n,i){return(n=ts(n))in l?Object.defineProperty(l,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[n]=i,l}function ts(l){var n=ls(l,"string");return pe(n)=="symbol"?n:n+""}function ls(l,n){if(pe(l)!="object"||!l)return l;var i=l[Symbol.toPrimitive];if(i!==void 0){var m=i.call(l,n);if(pe(m)!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(l)}var yt={name:"ToggleButton",extends:Xl,inheritAttrs:!1,emits:["change"],methods:{getPTOptions:function(n){var i=n==="root"?this.ptmi:this.ptm;return i(n,{context:{active:this.active,disabled:this.disabled}})},onChange:function(n){!this.disabled&&!this.readonly&&(this.writeValue(!this.d_value,n),this.$emit("change",n))},onBlur:function(n){var i,m;(i=(m=this.formField).onBlur)===null||i===void 0||i.call(m,n)}},computed:{active:function(){return this.d_value===!0},hasLabel:function(){return rt(this.onLabel)&&rt(this.offLabel)},label:function(){return this.hasLabel?this.d_value?this.onLabel:this.offLabel:" "},dataP:function(){return Be(es({checked:this.active,invalid:this.$invalid},this.size,this.size))}},directives:{ripple:De}},ss=["tabindex","disabled","aria-pressed","aria-label","aria-labelledby","data-p-checked","data-p-disabled","data-p"],os=["data-p"];function ns(l,n,i,m,h,d){var x=Ct("ripple");return I((r(),c("button",H({type:"button",class:l.cx("root"),tabindex:l.tabindex,disabled:l.disabled,"aria-pressed":l.d_value,onClick:n[0]||(n[0]=function(){return d.onChange&&d.onChange.apply(d,arguments)}),onBlur:n[1]||(n[1]=function(){return d.onBlur&&d.onBlur.apply(d,arguments)})},d.getPTOptions("root"),{"aria-label":l.ariaLabel,"aria-labelledby":l.ariaLabelledby,"data-p-checked":d.active,"data-p-disabled":l.disabled,"data-p":d.dataP}),[t("span",H({class:l.cx("content")},d.getPTOptions("content"),{"data-p":d.dataP}),[X(l.$slots,"default",{},function(){return[X(l.$slots,"icon",{value:l.d_value,class:R(l.cx("icon"))},function(){return[l.onIcon||l.offIcon?(r(),c("span",H({key:0,class:[l.cx("icon"),l.d_value?l.onIcon:l.offIcon]},d.getPTOptions("icon")),null,16)):Y("",!0)]}),t("span",H({class:l.cx("label")},d.getPTOptions("label")),v(d.label),17)]})],16,os)],16,ss)),[[x]])}yt.render=ns;var as=Te`
    .p-selectbutton {
        display: inline-flex;
        user-select: none;
        vertical-align: bottom;
        outline-color: transparent;
        border-radius: dt('selectbutton.border.radius');
    }

    .p-selectbutton .p-togglebutton {
        border-radius: 0;
        border-width: 1px 1px 1px 0;
    }

    .p-selectbutton .p-togglebutton:focus-visible {
        position: relative;
        z-index: 1;
    }

    .p-selectbutton .p-togglebutton:first-child {
        border-inline-start-width: 1px;
        border-start-start-radius: dt('selectbutton.border.radius');
        border-end-start-radius: dt('selectbutton.border.radius');
    }

    .p-selectbutton .p-togglebutton:last-child {
        border-start-end-radius: dt('selectbutton.border.radius');
        border-end-end-radius: dt('selectbutton.border.radius');
    }

    .p-selectbutton.p-invalid {
        outline: 1px solid dt('selectbutton.invalid.border.color');
        outline-offset: 0;
    }
`,rs={root:function(n){var i=n.instance;return["p-selectbutton p-component",{"p-invalid":i.$invalid}]}},is=ze.extend({name:"selectbutton",style:as,classes:rs}),ds={name:"BaseSelectButton",extends:gt,props:{options:Array,optionLabel:null,optionValue:null,optionDisabled:null,multiple:Boolean,allowEmpty:{type:Boolean,default:!0},dataKey:null,ariaLabelledby:{type:String,default:null},size:{type:String,default:null}},style:is,provide:function(){return{$pcSelectButton:this,$parentInstance:this}}};function us(l,n){var i=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(!i){if(Array.isArray(l)||(i=bt(l))||n){i&&(l=i);var m=0,h=function(){};return{s:h,n:function(){return m>=l.length?{done:!0}:{done:!1,value:l[m++]}},e:function(k){throw k},f:h}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,x=!0,f=!1;return{s:function(){i=i.call(l)},n:function(){var k=i.next();return x=k.done,k},e:function(k){f=!0,d=k},f:function(){try{x||i.return==null||i.return()}finally{if(f)throw d}}}}function cs(l){return gs(l)||fs(l)||bt(l)||ps()}function ps(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(l,n){if(l){if(typeof l=="string")return Ce(l,n);var i={}.toString.call(l).slice(8,-1);return i==="Object"&&l.constructor&&(i=l.constructor.name),i==="Map"||i==="Set"?Array.from(l):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ce(l,n):void 0}}function fs(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function gs(l){if(Array.isArray(l))return Ce(l)}function Ce(l,n){(n==null||n>l.length)&&(n=l.length);for(var i=0,m=Array(n);i<n;i++)m[i]=l[i];return m}var xt={name:"SelectButton",extends:ds,inheritAttrs:!1,emits:["change"],methods:{getOptionLabel:function(n){return this.optionLabel?ve(n,this.optionLabel):n},getOptionValue:function(n){return this.optionValue?ve(n,this.optionValue):n},getOptionRenderKey:function(n){return this.dataKey?ve(n,this.dataKey):this.getOptionLabel(n)},isOptionDisabled:function(n){return this.optionDisabled?ve(n,this.optionDisabled):!1},isOptionReadonly:function(n){if(this.allowEmpty)return!1;var i=this.isSelected(n);return this.multiple?i&&this.d_value.length===1:i},onOptionSelect:function(n,i,m){var h=this;if(!(this.disabled||this.isOptionDisabled(i)||this.isOptionReadonly(i))){var d=this.isSelected(i),x=this.getOptionValue(i),f;if(this.multiple)if(d){if(f=this.d_value.filter(function(T){return!Se(T,x,h.equalityKey)}),!this.allowEmpty&&f.length===0)return}else f=this.d_value?[].concat(cs(this.d_value),[x]):[x];else{if(d&&!this.allowEmpty)return;f=d?null:x}this.writeValue(f,n),this.$emit("change",{event:n,value:f})}},isSelected:function(n){var i=!1,m=this.getOptionValue(n);if(this.multiple){if(this.d_value){var h=us(this.d_value),d;try{for(h.s();!(d=h.n()).done;){var x=d.value;if(Se(x,m,this.equalityKey)){i=!0;break}}}catch(f){h.e(f)}finally{h.f()}}}else i=Se(this.d_value,m,this.equalityKey);return i}},computed:{equalityKey:function(){return this.optionValue?null:this.dataKey},dataP:function(){return Be({invalid:this.$invalid})}},directives:{ripple:De},components:{ToggleButton:yt}},vs=["aria-labelledby","data-p"];function ys(l,n,i,m,h,d){var x=qe("ToggleButton");return r(),c("div",H({class:l.cx("root"),role:"group","aria-labelledby":l.ariaLabelledby},l.ptmi("root"),{"data-p":d.dataP}),[(r(!0),c(K,null,Z(l.options,function(f,T){return r(),D(x,{key:d.getOptionRenderKey(f),modelValue:d.isSelected(f),onLabel:d.getOptionLabel(f),offLabel:d.getOptionLabel(f),disabled:l.disabled||d.isOptionDisabled(f),unstyled:l.unstyled,size:l.size,readonly:d.isOptionReadonly(f),onChange:function(w){return d.onOptionSelect(w,f,T)},pt:l.ptm("pcToggleButton")},Lt({_:2},[l.$slots.option?{name:"default",fn:u(function(){return[X(l.$slots,"option",{option:f,index:T},function(){return[t("span",H({ref_for:!0},l.ptm("pcToggleButton").label),v(d.getOptionLabel(f)),17)]})]}),key:"0"}:void 0]),1032,["modelValue","onLabel","offLabel","disabled","unstyled","size","readonly","onChange","pt"])}),128))],16,vs)}xt.render=ys;var bs={EQUALS:"equals"};const xs={class:"absolute top-1 right-2 z-10"},ms=re({__name:"longChart.template",props:{dateTime:{},long:{},short:{},empty:{},long_coin_num:{},short_coin_num:{}},setup(l,{expose:n}){const{themeMode:i}=Tt(),m=l,h=_(null),d=_(null),x=_(!1),f=_(0),T=it(()=>{const P=m.long||[],M=m.short||[],z=m.empty||[],y=Math.max(P.length,M.length,z.length),W=[],j=[],B=[];for(let J=0;J<y;J++){const N=P[J]??0,$=M[J]??0,o=z[J]??0,p=N+$+o;p>0?(W.push(Number((N/p).toFixed(3))),j.push(Number(($/p).toFixed(3))),B.push(Number((o/p).toFixed(3)))):(W.push(0),j.push(0),B.push(0))}return{backgroundColor:i.value==="dark"?"#171717":"",color:["#22c55e","#ef4444","#9ca3af"],title:{text:"多空比例",left:"center",textStyle:{fontSize:14,fontWeight:"normal"},top:8},tooltip:{trigger:"axis",z:1e3,textStyle:{fontSize:10}},legend:{data:["Long","Short","empty"],top:32,textStyle:{fontSize:10}},grid:{top:54,left:40,right:5,bottom:20},xAxis:{type:"category",data:m.dateTime,axisLabel:{rotate:0,fontSize:8}},yAxis:{type:"value",min:0,max:1,name:"Ratio",position:"left",nameTextStyle:{fontSize:10}},dataZoom:[{type:"inside",xAxisIndex:0,start:0,end:100}],series:[{name:"Long",type:"line",stack:"ratio",data:W,showSymbol:!1,areaStyle:{color:"#22c55e",opacity:.6},lineStyle:{color:"#22c55e"}},{name:"Short",type:"line",stack:"ratio",showSymbol:!1,data:j,areaStyle:{color:"#ef4444",opacity:.6},lineStyle:{color:"#ef4444"}},{name:"empty",type:"line",stack:"ratio",showSymbol:!1,data:B,areaStyle:{color:"#9ca3af",opacity:.6},lineStyle:{color:"#9ca3af"}}]}}),k=it(()=>({backgroundColor:i.value==="dark"?"#171717":"",title:{text:"多空选币",left:"center",textStyle:{fontSize:14,fontWeight:"normal"},top:8},color:["#6bd16b","#e57373"],tooltip:{trigger:"axis",z:1e3,textStyle:{fontSize:10}},legend:{data:["多头选币","空头选币"],top:32,textStyle:{fontSize:10}},grid:{top:54,left:40,right:5,bottom:20},xAxis:{type:"category",data:m.dateTime,axisLabel:{rotate:0,fontSize:8}},yAxis:{type:"value",name:"数量",nameTextStyle:{fontSize:10}},dataZoom:[{type:"inside",xAxisIndex:0,start:0,end:100}],series:[{name:"多头选币",type:"line",data:m.long_coin_num,showSymbol:!1,lineStyle:{color:"#6bd16b"}},{name:"空头选币",type:"line",data:m.short_coin_num,showSymbol:!1,lineStyle:{color:"#e57373"}}]}));let w=!1,O=window.innerHeight;const V=()=>{if(w||!h.value||!d)return;const P=window.innerHeight;Math.abs(P-O)>10&&(f.value++,O=P)};return fe(()=>{w=!1,window.addEventListener("resize",V)}),be(()=>{w=!0,window.removeEventListener("resize",V)}),n({handleResize:V}),(P,M)=>{const z=ie,y=qe("v-chart"),W=xe;return r(),c("div",{class:R(["w-full flex-1 flex flex-col",[x.value===!0?"w-screen h-screen fixed inset-0 z-[9999] bg-white dark:bg-neutral-900 p-4":"relative"]])},[t("div",xs,[x.value===!1?I((r(),D(z,{key:0,icon:"pi pi-window-maximize",text:"",rounded:"",severity:"secondary",size:"small",onClick:M[0]||(M[0]=j=>x.value=!0)},null,512)),[[W,"放大显示"]]):I((r(),D(z,{key:1,icon:"pi pi-window-minimize",text:"",rounded:"",severity:"secondary",size:"small",onClick:M[1]||(M[1]=j=>x.value=!1)},null,512)),[[W,"退出放大"]])]),(r(),D(y,{ref_key:"refChart1",ref:h,key:`longRatio-${f.value}`,option:T.value,theme:F(i)==="dark"?"dark":"light",class:"w-full flex-1",autoresize:""},null,8,["option","theme"])),(r(),D(y,{ref_key:"refChart2",ref:d,key:`coinNum-${f.value}`,option:k.value,theme:F(i)==="dark"?"dark":"light",class:"w-full flex-1",autoresize:""},null,8,["option","theme"]))],2)}}}),hs={key:0,class:"flex justify-between gap-2"},_s={class:"flex gap-2"},ws={class:"flex items-center"},ks={class:"space-y-3 flex-1"},$s={class:"gap-3 pb-2 hidden sm:flex"},Ss={class:"gap-3 pb-2 flex sm:hidden"},Cs={class:"flex items-center gap-1 sm:gap-2"},Ls={class:"text-lg font-bold"},Ts={class:"text-xs text-gray-500 dark:text-gray-200"},zs={class:"text-xs text-center hidden sm:block"},qs={class:"text-gray-500 dark:text-gray-300 font-medium"},Ds={class:"text-md flex items-center justify-center gap-2"},Bs=["onClick"],Fs={class:"flex-1 flex justify-center items-center"},Os={key:1,class:"font-bold text-primary-500 font-mono text-4xl sm:text-5xl"},Vs={key:2,class:"text-7xl font-bold text-primary-500 font-mono"},Ps={class:"text-xs text-center sm:hidden"},js={class:"text-gray-500 dark:text-gray-300 font-medium"},As={class:"text-sm space-y-4 flex-row justify-around"},Is={class:"flex justify-between w-full bg-gray-100 dark:bg-neutral-800 p-2 rounded-md"},Ws={class:"flex flex-1 flex-col items-center gap-2"},Ns={class:"flex flex-1 flex-col items-center gap-2"},Rs={class:"flex justify-between w-full bg-gray-100 dark:bg-neutral-800 p-2 rounded-md"},Ms={class:"flex flex-1 flex-col items-center gap-2"},Us={class:"flex flex-1 flex-col items-center gap-2"},Es={key:1,class:"flex-1 flex flex-col items-center px-4 py-3"},Hs={key:1,class:"flex-1 flex flex-col items-center px-4 py-3"},Ks={class:"w-20"},Ys={key:1,class:"flex-1 flex items-center justify-center"},Js={class:"flex justify-between items-center gap-2"},Gs={key:0,class:"flex-1 flex flex-col px-2 w-full"},Zs={class:"divide-y divide-gray-100 dark:divide-neutral-700"},Qs={class:"flex-1 flex flex-col justify-center gap-1"},Xs={class:"font-semibold text-gray-800 dark:text-gray-200"},eo={class:"text-xs text-gray-500 dark:text-gray-300 text-left"},to={class:"font-mono text-xl text-right"},lo={key:1,class:"flex-1 flex items-center justify-center"},so={class:"flex px-4 justify-between"},oo={key:0,class:"flex items-center justify-center gap-2 text-xs text-gray-500 dark:text-gray-300"},no={key:0,class:"flex flex-col"},ao={class:"w-20 flex"},ro={class:"w-20 text-center"},io={class:"w-12 text-center"},uo={key:0,class:"flex items-center gap-1 flex-wrap"},co={key:0,class:"cursor-pointer text-xs text-primary-500 dark:text-primary-300"},po={class:"w-12 text-center"},fo={class:"w-12 text-center"},go={class:"w-12 text-center"},vo={class:"w-12 text-center"},yo={class:"flex items-center gap-2"},bo={key:1,class:"flex-1 flex items-center justify-center"},xo={key:1,class:"h-full flex-1 flex flex-col items-center justify-center gap-4"},mo={class:"text-center text-sm"},ho={class:"flex flex-col gap-4"},_o={key:0,class:"font-medium text-xs"},wo={key:0,class:"space-x-2"},ko={key:1,class:"space-x-2"},$o={key:1,class:"font-medium text-xs"},So={class:"font-medium text-xs"},Co={key:0},Lo={class:"font-medium text-xs"},To={key:2,class:"font-medium text-xss"},zo=re({__name:"accountListModule.template",setup(l){const n=ut(),i=_(null),m=_(!1),h=_([]),d=_(["持仓合约","持仓现货"]),x=_(!1),f=_([{label:"多",value:1},{label:"空",value:-1}]),T=_({side:{value:null,matchMode:bs.EQUALS}}),k=_("因子"),w=_(["因子","过滤因子","后置因子"]),O=_([]),V=_({factorList:[],filterList:[],filterListPost:[]}),P=_("1h"),M=[{label:"最近1小时",value:"1h"},{label:"最近24小时",value:"24h"}],z=_(0),y=[{label:"最近7天",value:7},{label:"最近30天",value:30},{label:"全部时间",value:0}],W=_(["盈利","亏损"]),j=_(["bg-green-500","bg-yellow-500","bg-blue-500","bg-purple-500","bg-teal-500"]),B=_([]);fe(()=>{J()});const J=async()=>{m.value=!0;const C=await Bt(z.value);h.value=C.data,h.value.forEach(a=>{a.selectValue="持仓合约",a.coinSortType="盈利"}),$(),m.value=!1,p()},N=_([]),$=()=>{h.value.forEach((C,a)=>{C.strategy_pool&&Array.isArray(C.strategy_pool)&&(C.strategy_pool=C.strategy_pool.flatMap(E=>E.strategy_list.map(de=>({...de,name:E.name}))))})},o=C=>C!=null&&C.pnl_history&&P.value&&C.pnl_history[P.value]&&C.pnl_history[P.value].length>0?C.coinSortType==="盈利"?C.pnl_history[P.value].filter(a=>a.total_pnl>0).sort((a,E)=>E.total_pnl-a.total_pnl).slice(0,5):C.pnl_history[P.value].filter(a=>a.total_pnl<0).sort((a,E)=>a.total_pnl-E.total_pnl).slice(0,5):[],p=()=>{N.value=h.value.map(C=>C.id)},S=()=>{N.value=[]},U=C=>{N.value.includes(C)?N.value=N.value.filter(a=>a!==C):N.value.push(C)},te=(C=0)=>{n.push({path:`/strategyCenter/${C}`})},he=(C,a,E)=>{x.value=!0,V.value={factorList:C||[],filterList:a||[],filterListPost:E||[]},k.value="因子",O.value=[...V.value.factorList]},le=()=>{k.value==="因子"?O.value=[...V.value.factorList]:k.value==="过滤因子"?O.value=[...V.value.filterList]:k.value==="后置因子"&&(O.value=[...V.value.filterListPost])},b=C=>{B.value.includes(C)?B.value=B.value.filter(a=>a!==C):B.value.push(C)};return(C,a)=>{const E=ie,de=zt,ne=Oe,G=Fe,_e=Nt,we=xt,A=Wt,ke=It,mt=vt,ht=me,ge=xe;return r(),c(K,null,[h.value.length>0?(r(),c("div",hs,[t("div",_s,[s(E,{type:"button",icon:"pi pi-plus","icon-class":"text-xs",class:"text-xs shadow-sm bg-white dark:bg-neutral-800 border-0 text-gray-500 dark:text-gray-200",label:"展开",size:"small",onClick:p,disabled:N.value.length===h.value.length},null,8,["disabled"]),s(E,{type:"button",variant:"outlined","icon-class":"text-xs",icon:"pi pi-minus",label:"折叠",class:"text-xs shadow-sm bg-white dark:bg-neutral-800 border-0 text-gray-500 dark:text-gray-200",size:"small",onClick:S,disabled:N.value.length===0},null,8,["disabled"])]),t("div",ws,[a[8]||(a[8]=t("span",{class:"text-gray-500 text-xs dark:text-gray-300"},"时间范围：",-1)),s(de,{modelValue:z.value,"onUpdate:modelValue":a[0]||(a[0]=e=>z.value=e),options:y,optionLabel:"label",optionValue:"value",placeholder:"时间范围",size:"small",pt:{label:"text-xs py-1",list:"text-xs"},onValueChange:J},null,8,["modelValue"])])])):Y("",!0),t("div",ks,[m.value?(r(),c(K,{key:0},Z(2,e=>t("div",{key:e,class:"flex flex-col"},[s(ne,{width:"100%",height:"40px",class:"mb-2"}),t("div",$s,[s(ne,{class:"flex-2",height:"250px"}),s(ne,{class:"flex-1",height:"250px"}),s(ne,{class:"flex-1",height:"250px"})]),t("div",Ss,[s(ne,{class:"flex-2",height:"250px"}),s(ne,{class:"flex-1",height:"250px"})])])),64)):(r(),c(K,{key:1},[h.value.length>0?(r(!0),c(K,{key:0},Z(h.value,e=>(r(),D(mt,{key:e.id,class:R(["flex flex-col rounded-xl overflow-hidden border-none shadow-sm",[i.value===e.id?"w-screen h-screen fixed inset-0 z-50 p-4 flex flex-col overflow-y-auto rounded-none":"h-auto"]]),pt:{contentContainer:{class:"p-0 flex-1 flex flex-col"},content:{class:"p-0 flex-1"}},collapsed:!N.value.includes(e.id),"onUpdate:collapsed":()=>U(e.id),toggleable:i.value!==e.id},{header:u(()=>{var se,ue,ce;return[t("div",Cs,[t("span",Ls,v(e.account_name),1),t("span",Ts,v(e.framework_name),1),I((r(),D(G,{class:"text-xs font-medium"},{default:u(()=>[L(v(e.hour_offset),1)]),_:2},1024)),[[ge,"分钟偏移"]]),s(E,{icon:"pi pi-pencil",text:"",rounded:"",size:"small",onClick:$e=>te(e.edit_id)},null,8,["onClick"]),t("div",zs,[a[9]||(a[9]=L(" 更新时间：")),t("span",qs,v(((ce=e==null?void 0:e.equity)==null?void 0:ce.time[((ue=(se=e==null?void 0:e.equity)==null?void 0:se.time)==null?void 0:ue.length)-1])||"--"),1)])])]}),icons:u(()=>[i.value!==e.id?I((r(),D(E,{key:0,icon:"pi pi-window-maximize",text:"",rounded:"",severity:"secondary",size:"small",onClick:se=>i.value=e.id,class:"hidden sm:inline-flex"},null,8,["onClick"])),[[ge,"全屏显示"]]):I((r(),D(E,{key:1,icon:"pi pi-window-minimize",text:"",rounded:"",severity:"secondary",size:"small",onClick:a[1]||(a[1]=se=>i.value=null),class:"hidden sm:inline-flex"},null,512)),[[ge,"退出全屏"]])]),default:u(()=>{var se,ue,ce,$e,Ve,Pe,je,Ae,Ie,We,Ne,Re,Me,Ue,Ee,He,Ke,Ye,Je,Ge,Ze,Qe,Xe,et,tt,lt,st,ot,nt,at;return[t("div",{class:R(["flex gap-3 px-4 pb-1",[i.value===e.id?"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-3":"overflow-x-auto flex-nowrap scrollbar-thin max-h-120 box-content"]])},[t("div",{class:R(["px-4 py-3 flex flex-col gap-4 bg-gray-50 dark:bg-neutral-900 rounded-lg",[i.value===e.id?"max-h-120":"min-w-full sm:min-w-100"]])},[t("div",Ds,[a[10]||(a[10]=L(" 账户净值 ")),t("i",{class:R([[B.value.includes(e.id)?"pi pi-eye-slash":"pi pi-eye"],"hover:text-gray-500 hover:dark:text-gray-300 cursor-pointer text-[18px]"]),onClick:g=>b(e.id)},null,10,Bs)]),t("div",Fs,[t("div",{class:R(["flex flex-row flex-wrap justify-center gap-2",[B.value.includes(e.id)?"items-center":"items-end"]])},[!B.value.includes(e.id)&&((se=e==null?void 0:e.equity)!=null&&se.equity_amount)&&((ce=(ue=e==null?void 0:e.equity)==null?void 0:ue.equity_amount)==null?void 0:ce.length)>0?(r(),c("div",{key:0,class:R(["font-bold text-primary-500 font-mono",[($e=e==null?void 0:e.equity)!=null&&$e.equity_amount&&((Pe=(Ve=e==null?void 0:e.equity)==null?void 0:Ve.equity_amount)==null?void 0:Pe.length)>0&&((Ie=e==null?void 0:e.equity)==null?void 0:Ie.equity_amount[((Ae=(je=e==null?void 0:e.equity)==null?void 0:je.equity_amount)==null?void 0:Ae.length)-1])<1e3?"text-6xl sm:text-7xl":(We=e==null?void 0:e.equity)!=null&&We.equity_amount&&((Re=(Ne=e==null?void 0:e.equity)==null?void 0:Ne.equity_amount)==null?void 0:Re.length)>0&&((Ee=e==null?void 0:e.equity)==null?void 0:Ee.equity_amount[((Ue=(Me=e==null?void 0:e.equity)==null?void 0:Me.equity_amount)==null?void 0:Ue.length)-1])<1e5?"text-5xl sm:text-6xl":"text-4xl sm:text-5xl"]])},v(Number((Ye=e==null?void 0:e.equity)==null?void 0:Ye.equity_amount[((Ke=(He=e==null?void 0:e.equity)==null?void 0:He.equity_amount)==null?void 0:Ke.length)-1]).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")),3)):B.value.includes(e.id)?(r(),c("div",Os," **** ")):(r(),c("div",Vs," -- ")),a[11]||(a[11]=t("div",{class:"text-sm text-gray-500"},"USDT",-1))],2)]),s(_e,{class:"m-0"}),t("div",Ps,[a[12]||(a[12]=L(" 更新时间：")),t("span",js,v(((Ze=e==null?void 0:e.equity)==null?void 0:Ze.time[((Ge=(Je=e==null?void 0:e.equity)==null?void 0:Je.time)==null?void 0:Ge.length)-1])||"--"),1)]),t("div",As,[t("div",Is,[t("div",Ws,[a[13]||(a[13]=t("span",null,"24H盈亏",-1)),s(G,{class:"font-medium w-30 font-mono rounded-sm"},{default:u(()=>[L(v(B.value.includes(e.id)?"****":(e==null?void 0:e.eq_pnl_24h)||"--"),1)]),_:2},1024)]),s(_e,{layout:"vertical"}),t("div",Ns,[a[14]||(a[14]=t("span",null,"24H收益率",-1)),s(G,{class:"font-medium w-30 font-mono rounded-sm"},{default:u(()=>[L(v(B.value.includes(e.id)?"****":(e==null?void 0:e.eq_pct_24h)||"--")+"%",1)]),_:2},1024)])]),t("div",Rs,[t("div",Ms,[a[15]||(a[15]=t("span",null,"24H最大净值",-1)),s(G,{class:"font-medium w-30 font-mono rounded-sm"},{default:u(()=>[L(v(B.value.includes(e.id)?"****":(e==null?void 0:e.eq_max_24h)||"--"),1)]),_:2},1024)]),s(_e,{layout:"vertical"}),t("div",Us,[a[16]||(a[16]=t("span",null,"24H最小净值",-1)),s(G,{class:"font-medium w-30 font-mono rounded-sm"},{default:u(()=>[L(v(B.value.includes(e.id)?"****":(e==null?void 0:e.eq_min_24h)||"--"),1)]),_:2},1024)])])])],2),t("div",{class:R(["box-border flex flex-col justify-end gap-4 bg-gray-50 dark:bg-neutral-900 rounded-lg overflow-hidden",[i.value===e.id?"max-h-120 min-h-100":"min-w-full sm:min-w-110"]])},[e!=null&&e.equity&&((Qe=e==null?void 0:e.equity)!=null&&Qe.time)&&((Xe=e==null?void 0:e.equity)!=null&&Xe.net)&&((et=e==null?void 0:e.equity)!=null&&et.dd2here)&&(e!=null&&e.sub_stg_eqs)?(r(),D(Pt,{key:0,dateTime:e.equity.time,equity:e.equity.net,dd2here:e.equity.dd2here,sub_stg_eqs:e.sub_stg_eqs},null,8,["dateTime","equity","dd2here","sub_stg_eqs"])):(r(),c("div",Es,a[17]||(a[17]=[t("div",{class:"text-md text-center"},"策略净值曲线图",-1),t("div",{class:"flex-1 flex items-center justify-center"},[t("img",{src:Q,class:"w-40 h-auto"})],-1)])))],2),t("div",{class:R(["flex bg-gray-50 dark:bg-neutral-900 rounded-lg overflow-hidden",[i.value===e.id?"max-h-120 min-h-100":"min-w-full sm:min-w-110"]])},[e!=null&&e.equity&&((tt=e==null?void 0:e.equity)!=null&&tt.time)&&((lt=e==null?void 0:e.equity)!=null&&lt.long_ratio)&&((st=e==null?void 0:e.equity)!=null&&st.short_ratio)&&((ot=e==null?void 0:e.equity)!=null&&ot.empty_ratio)&&((nt=e==null?void 0:e.equity)!=null&&nt.long_coin_num)&&((at=e==null?void 0:e.equity)!=null&&at.short_coin_num)?(r(),D(ms,{key:0,dateTime:e.equity.time,long:e.equity.long_ratio,short:e.equity.short_ratio,empty:e.equity.empty_ratio,long_coin_num:e.equity.long_coin_num,short_coin_num:e.equity.short_coin_num},null,8,["dateTime","long","short","empty","long_coin_num","short_coin_num"])):(r(),c("div",Hs,a[18]||(a[18]=[t("div",{class:"text-md text-center"},"多空统计",-1),t("div",{class:"flex-1 flex items-center justify-center"},[t("img",{src:Q,class:"w-40 h-auto"})],-1)])))],2),t("div",{class:R(["pt-3 flex flex-col content-between bg-gray-50 dark:bg-neutral-900 rounded-lg",[i.value===e.id?"max-h-120":e!=null&&e.pos_swap||e!=null&&e.pos_spot?"":"min-w-full sm:min-w-100"]])},[s(we,{modelValue:e.selectValue,"onUpdate:modelValue":g=>e.selectValue=g,options:d.value,size:"small",class:"pl-4"},null,8,["modelValue","onUpdate:modelValue","options"]),e!=null&&e.pos_swap||e!=null&&e.pos_spot?(r(),D(ke,{key:0,value:e.selectValue==="持仓合约"?e.pos_swap||[]:e.pos_spot||[],paginator:"",rows:6,class:"!bg-transparent flex-1 flex flex-col",pt:{tableContainer:{class:"flex-1"},table:{class:"text-xs !bg-transparent h-full"}},filters:T.value,"onUpdate:filters":a[2]||(a[2]=g=>T.value=g),filterDisplay:"menu",globalFilterFields:["side"]},{empty:u(()=>a[19]||(a[19]=[t("div",{class:"flex items-center justify-center h-full"},[t("img",{src:Q,class:"w-40 h-auto"})],-1)])),default:u(()=>[s(A,{field:"symbol",header:"币种",class:"min-w-20"},{body:u(({data:g})=>[t("div",Ks,v(g.symbol||"--"),1)]),_:1}),s(A,{field:"change",header:"涨幅",sortable:"",class:"min-w-20"},{body:u(({data:g})=>[s(G,{severity:Number(g.change.split("%")[0])>0?"success":"danger",class:"text-xs"},{default:u(()=>[L(v(g.change),1)]),_:2},1032,["severity"])]),_:1}),s(A,{field:"side",header:"方向",class:"min-w-22",showFilterMatchModes:!1,showApplyButton:!1,filterMenuClass:"w-10",pt:{filter:{class:"w-6 h-6  justify-center items-center ml-0"}}},{body:u(({data:g})=>[s(G,{severity:g.side===1?"success":"danger",class:"text-xs w-6 h-6 font-medium",size:"small",variant:"simple",rounded:""},{default:u(()=>[L(v(g.side===1?"多":"空"),1)]),_:2},1032,["severity"])]),filter:u(({filterModel:g,filterCallback:oe})=>[s(de,{modelValue:g.value,"onUpdate:modelValue":ae=>g.value=ae,options:f.value,optionLabel:"label",optionValue:"value",placeholder:"选择方向",showClear:"",onChange:ae=>oe()},{option:u(ae=>[s(G,{value:ae.option.label,severity:ae.option.value===1?"success":"danger",rounded:""},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1}),s(A,{field:"pos_u",header:"仓位价值",sortable:"",class:"min-w-28"}),s(A,{field:"pnl_u",header:"未实现盈亏",sortable:"",class:"min-w-30"}),s(A,{field:"avg_price",header:"均价",class:"min-w-15"}),s(A,{field:"cur_price",header:"当前价格",class:"min-w-20"})]),_:2},1032,["value","filters"])):(r(),c("div",Ys,a[20]||(a[20]=[t("img",{src:Q,class:"w-40 h-auto"},null,-1)])))],2),t("div",{class:R(["px-4 py-3 flex flex-col gap-3 bg-gray-50 dark:bg-neutral-900 rounded-lg",[i.value===e.id?"max-h-120":"min-w-full sm:min-w-100"]])},[a[23]||(a[23]=t("div",{class:"flex justify-center text-md"},"盈利/亏损币前五名",-1)),t("div",Js,[s(we,{modelValue:e.coinSortType,"onUpdate:modelValue":g=>e.coinSortType=g,options:W.value,size:"small"},null,8,["modelValue","onUpdate:modelValue","options"]),s(de,{modelValue:P.value,"onUpdate:modelValue":a[3]||(a[3]=g=>P.value=g),options:M,optionLabel:"label",optionValue:"value",placeholder:"时间范围",size:"small"},null,8,["modelValue"])]),o(e).length>0?(r(),c("div",Gs,[t("div",Zs,[(r(!0),c(K,null,Z(o(e),(g,oe)=>(r(),c("div",{key:g.symbol,class:"flex items-center gap-3 py-3 first:pt-0 last:pb-0"},[t("div",{class:R(["w-2 h-2 rounded-full",j.value[oe]||"bg-gray-500"])},null,2),t("div",Qs,[t("span",Xs,v(g.symbol),1),t("div",eo,v(g.type==="swap"?"合约持仓":"现货持仓"),1)]),t("div",to,[t("span",{class:R(g.total_pnl>0?"text-green-600":"text-red-600")},v(Number(g.total_pnl).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),3),a[21]||(a[21]=t("span",{class:"text-xs text-gray-500 dark:text-gray-300"}," USDT ",-1))])]))),128))])])):(r(),c("div",lo,a[22]||(a[22]=[t("img",{src:Q,class:"w-40 h-auto"},null,-1)]))),a[24]||(a[24]=t("div",{class:"text-xs text-gray-500 dark:text-gray-300 text-center"}," 开平仓币种数据可能还不准确，后续会优化 ",-1))],2),t("div",{class:R(["pt-3 flex flex-col gap-2 bg-gray-50 dark:bg-neutral-900 rounded-lg",[i.value===e.id?"max-h-120":""]])},[t("div",so,[a[26]||(a[26]=t("span",{class:"text-md hidden sm:block"}," 策略配置信息 ",-1)),e!=null&&e.strategy_name?(r(),c("div",oo,[a[25]||(a[25]=L(" 当前使用的策略是 ")),s(G,{class:"text-xs",severity:"secondary"},{default:u(()=>[L(v(e.strategy_name||"--"),1)]),_:2},1024)])):Y("",!0)]),e!=null&&e.strategy_name?(r(),c("div",no,[s(ke,{value:(e==null?void 0:e.strategy_pool)||[],paginator:"",rows:5,class:"!bg-transparent flex-1 flex flex-col",pt:{tableContainer:{class:"flex-1"},table:{class:"text-xs !bg-transparent h-full"}},rowGroupMode:"rowspan",groupRowsBy:"name",center:!0},{empty:u(()=>a[28]||(a[28]=[t("div",{class:"flex items-center justify-center h-full"},[t("img",{src:Q,class:"w-40 h-full"})],-1)])),default:u(()=>[s(A,{field:"name",header:"策略"},{body:u(({data:g})=>[t("div",ao,[s(G,{class:"font-medium text-xs"},{default:u(()=>[L(v(g.name),1)]),_:2},1024)])]),_:1}),s(A,{field:"strategy",header:"子策略权重"},{body:u(({data:g})=>[t("div",ro,v(g.cap_weight.toFixed(2)*100)+"%"+v(g.strategy),1)]),_:1}),s(A,{field:"hold_period",header:"持仓周期"},{body:u(({data:g})=>[t("div",io,v(g.hold_period),1)]),_:1}),s(A,{field:"offset_list",header:"offset_list",class:"min-w-25"},{body:u(({data:g})=>[g.offset_list&&g.offset_list.length?(r(),c("div",uo,[(r(!0),c(K,null,Z(g.offset_list.slice(0,3),(oe,ae)=>(r(),D(G,{key:oe,class:"font-medium text-xs",severity:"secondary"},{default:u(()=>[L(v(oe),1)]),_:2},1024))),128)),g.offset_list.length>3?I((r(),c("span",co,[L("+"+v(g.offset_list.length-3),1)])),[[ge,{value:`所有的offset：${g.offset_list.join(", ")}`,autoHide:!1},void 0,{bottom:!0}]]):Y("",!0)])):Y("",!0)]),_:2},1024),s(A,{field:"is_use_spot",header:"现货/合约模式"},{body:u(({data:g})=>[s(G,{class:"font-medium text-xs w-11",severity:g.is_use_spot?"success":"info"},{default:u(()=>[L(v(g.is_use_spot?"现货":"合约"),1)]),_:2},1032,["severity"])]),_:1}),s(A,{field:"long_cap_weight",header:"多头权重"},{body:u(({data:g})=>[t("div",po,v(g.long_cap_weight.toFixed(2)*100)+"% ",1)]),_:1}),s(A,{field:"short_cap_weight",header:"空头权重"},{body:u(({data:g})=>[t("div",fo,v(g.short_cap_weight.toFixed(2)*100)+"% ",1)]),_:1}),s(A,{field:"long_select_coin_num",header:"多头选币数量"},{body:u(({data:g})=>[t("div",go,v(g.long_select_coin_num),1)]),_:1}),s(A,{field:"short_select_coin_num",header:"空头选币数量"},{body:u(({data:g})=>[t("div",vo,v(g.short_select_coin_num),1)]),_:1}),s(A,{field:"factor_list",header:"因子/过滤因子/后置因子"},{body:u(({data:g})=>[t("div",yo,[s(E,{class:"text-xs w-34",size:"small",variant:"text",severity:"secondary",onClick:oe=>he(g.factor_list,g.filter_list,g.filter_list_post)},{default:u(()=>a[27]||(a[27]=[L(" 查看因子信息 ")])),_:2,__:[27]},1032,["onClick"])])]),_:1})]),_:2},1032,["value"])])):(r(),c("div",bo,a[29]||(a[29]=[t("img",{src:Q,class:"w-40 h-auto"},null,-1)])))],2)],2)]}),_:2},1032,["class","collapsed","onUpdate:collapsed","toggleable"]))),128)):(r(),c("div",xo,[t("div",mo,[a[30]||(a[30]=L(" 实盘交易暂时未启动，请去 ")),s(E,{label:"策略中心",variant:"text",class:"py-1 px-0",onClick:a[4]||(a[4]=e=>te(0))}),a[31]||(a[31]=L("启动实盘 "))]),a[32]||(a[32]=t("img",{src:Q,class:"w-60 h-auto"},null,-1))]))],64))]),s(ht,{visible:x.value,"onUpdate:visible":a[7]||(a[7]=e=>x.value=e),closable:!1,modal:"",class:"w-[90vw] sm:w-[600px] max-w-full"},{footer:u(()=>[s(E,{label:"关闭",size:"small",severity:"secondary",variant:"outlined",onClick:a[6]||(a[6]=e=>x.value=!1)})]),default:u(()=>[t("div",ho,[s(we,{modelValue:k.value,"onUpdate:modelValue":a[5]||(a[5]=e=>k.value=e),options:w.value,size:"small",onValueChange:le},null,8,["modelValue","options"]),s(ke,{value:O.value,paginator:"",rows:5,class:"text-sm"},{empty:u(()=>a[38]||(a[38]=[t("div",{class:"flex items-center justify-center h-full"},[t("img",{src:Q,class:"w-40 h-auto"})],-1)])),default:u(()=>[s(A,{header:k.value==="因子"?"因子":k.value==="过滤因子"?"过滤因子":"后置因子",style:{width:"100px"}},{body:u(({data:e})=>[s(G,{class:"font-medium text-xs"},{default:u(()=>[L(v(e[0]),1)]),_:2},1024)]),_:1},8,["header"]),s(A,{header:k.value==="因子"?"排序方式":"因子参数",style:{width:"100px"}},{body:u(({data:e})=>[k.value==="因子"?(r(),c("div",_o,[e[1]?(r(),c("div",wo,a[33]||(a[33]=[t("span",null,"升序",-1),t("i",{class:"pi pi-arrow-up text-xs"},null,-1)]))):(r(),c("div",ko,a[34]||(a[34]=[t("span",null,"降序",-1),t("i",{class:"pi pi-arrow-down text-xs"},null,-1)])))])):(r(),c("div",$o,v(e[1]),1))]),_:1},8,["header"]),s(A,{header:k.value==="因子"?"因子参数":"因子使用条件",style:{width:"140px"}},{body:u(({data:e})=>[t("div",So,v(e[2]),1)]),_:1},8,["header"]),s(A,{header:k.value==="因子"?"因子权重":"排序方式",style:{width:"100px"}},{body:u(({data:e})=>[k.value==="因子"?(r(),c("div",Co,[t("div",Lo,v(e[3]),1)])):(r(),c("div",To,a[37]||(a[37]=[t("div",{class:"space-x-2"},[t("span",null,"升序"),t("i",{class:"pi pi-arrow-up text-xs"})],-1)])))]),_:1},8,["header"])]),_:1},8,["value"])])]),_:1},8,["visible"])],64)}}}),qo=Rt(zo,[["__scopeId","data-v-51c22f8e"]]),Do={class:"space-y-4 sm:space-y-6 px-2 py-1"},Bo={class:"flex items-center gap-2"},Fo={class:"font-bold text-xl text-primary-600"},Oo={class:"bg-primary-50 dark:bg-neutral-800 rounded px-4 py-3"},Vo={class:"space-y-3"},Po="2026-1-9",jo=re({__name:"versionUpdataLog.template",setup(l){const i=Mt().version,m={"0.3.0":["📊 首页监控状态增加 1 小时、24 小时盈利/亏损币前五名","⚡ 支持一键升级框架","📈 新增数据中心状态监控时间线","⏱ 资金曲线图、多空比例、多空选币支持滚动/拖拽切换时间范围","🧩 支持上传择时因子"],"0.4.0":["🛠 修复问题：修复已知 bug，整体运行更加稳定","📊 数据中心：新增升级功能，支持在线更新至最新版本","🔑 账号功能：支持多端同时登录，使用更灵活","💻 设备管理：全新设备管理页面，可查看历史登录设备，并支持一键下线","📦 框架迁移：新增导出/导入功能，快速迁移框架相关数据","📈 持仓数据：首页持仓支持字段排序与筛选，信息更清晰","🌐 网络状态：右上角新增网络延迟显示，实时掌握连接情况"],"0.5.0":["📈 杠杆范围：支持两位小数，参数设置更精细","🎨 策略兼容：适配「浪淘沙」填充逻辑，兼容更多策略模板","📥 策略导入：支持选币策略导入","🧩 监控开关：账户监控与下架监控支持自定义启用，灵活控制运行","🕒 数据筛选：首页账户数据支持按时间范围筛选，查看更便捷","🧪 模式扩展：新增“模拟实盘”模式","🔐 安全增强：API Key 与密钥支持加密开关，自主控制数据安全级别","📐 界面优化：整体页面布局升级，交互体验更流畅"],"0.5.1":["✨ 升级至 2026 分享会版本"]},h=_(!1);fe(()=>{localStorage.getItem("lastReadVersion")!==i&&(h.value=!0)});const d=()=>{h.value=!1,localStorage.setItem("lastReadVersion",i)};return(x,f)=>{const T=ie,k=me;return r(),D(k,{visible:h.value,"onUpdate:visible":f[0]||(f[0]=w=>h.value=w),modal:!0,closable:!1,draggable:!1,"show-header":!1,class:"max-w-[90vw] min-w-[40vw]",pt:{content:{class:"pt-5"}}},{footer:u(()=>[s(T,{label:"已阅",onClick:d,autofocus:"",class:"w-full"})]),default:u(()=>[t("div",Do,[t("div",Bo,[f[1]||(f[1]=t("i",{class:"pi pi-gift text-primary-600 text-2xl"},null,-1)),t("span",Fo,"公测版本 "+v(F(i)),1),t("span",{class:"ml-auto text-xs text-gray-400"},v(Po))]),t("div",Oo,[f[2]||(f[2]=t("div",{class:"font-semibold text-base text-primary-600 dark:text-primary-300 mb-3"}," 本次更新内容： ",-1)),t("ul",Vo,[(r(!0),c(K,null,Z(m[F(i)],(w,O)=>(r(),c("li",{key:O,class:"flex items-start gap-2"},[t("span",null,v(w),1)]))),128))])])])]),_:1},8,["visible"])}}}),Ao={class:"h-full w-full p-2 sm:p-6 space-y-3 flex flex-col"},Io={class:"flex gap-3"},en=re({__name:"home.page",setup(l){const n=_(null),i=_(!1),m=_([]),h=_(""),d=_(""),x=_(null);fe(async()=>{f()});const f=()=>{k(),T()},T=async()=>{i.value=!0;try{const w=await Ft();if(w.result===!0&&w.data.length>0){m.value=JSON.parse(JSON.stringify(w.data)).filter(V=>V.type!=="data_center").reverse();let O=JSON.parse(JSON.stringify(w.data));if(O=O.filter(V=>V.type==="data_center").sort((V,P)=>new Date(P.time).getTime()-new Date(V.time).getTime()),h.value=O[0].framework_id,d.value=O[0].framework_name,w.data[0].status===Ot.finished){i.value=!1,n.value&&n.value.startFrameWorkRunStatusTimer();return}}}catch{return}i.value&&(x.value=setTimeout(T,3e3))},k=()=>{x.value&&(clearTimeout(x.value),x.value=null)};return be(()=>{k()}),Le(()=>{k()}),(w,O)=>(r(),c("div",Ao,[t("div",Io,[s(dl,{ref_key:"refDataCenterModuleTemplate",ref:n,currentNewFrameWorkId:h.value,frameWorkName:d.value,downloadIsLoading:i.value},null,8,["currentNewFrameWorkId","frameWorkName","downloadIsLoading"]),s(Wl,{downloadIsLoading:i.value,frameWorkList:m.value},null,8,["downloadIsLoading","frameWorkList"])]),s(qo),s(jo)]))}});export{en as default};
