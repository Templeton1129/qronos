import{b4 as $,B as g,aA as E,ac as P,t as _,ad as b,aD as O,b5 as h,a3 as j,b6 as w}from"./index-B5ZzjzoS.js";function m(t){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(t)}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,x(n.key),n)}}function T(t,e,r){return e&&C(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function x(t){var e=H(t,"string");return m(e)=="symbol"?e:e+""}function H(t,e){if(m(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(m(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var M=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};L(this,t),this.element=e,this.listener=r}return T(t,[{key:"bindScrollListener",value:function(){this.scrollableParents=$(this.element);for(var r=0;r<this.scrollableParents.length;r++)this.scrollableParents[r].addEventListener("scroll",this.listener)}},{key:"unbindScrollListener",value:function(){if(this.scrollableParents)for(var r=0;r<this.scrollableParents.length;r++)this.scrollableParents[r].removeEventListener("scroll",this.listener)}},{key:"destroy",value:function(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}])}(),k=g.extend({name:"focustrap-directive"}),B=E.extend({style:k});function v(t){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(t)}function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function F(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?S(Object(r),!0).forEach(function(n){D(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function D(t,e,r){return(e=I(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(t){var e=A(t,"string");return v(e)=="symbol"?e:e+""}function A(t,e){if(v(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(v(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q=B.extend("focustrap",{mounted:function(e,r){var n=r.value||{},o=n.disabled;o||(this.createHiddenFocusableElements(e,r),this.bind(e,r),this.autoElementFocus(e,r)),e.setAttribute("data-pd-focustrap",!0),this.$el=e},updated:function(e,r){var n=r.value||{},o=n.disabled;o&&this.unbind(e)},unmounted:function(e){this.unbind(e)},methods:{getComputedSelector:function(e){return':not(.p-hidden-focusable):not([data-p-hidden-focusable="true"])'.concat(e??"")},bind:function(e,r){var n=this,o=r.value||{},s=o.onFocusIn,c=o.onFocusOut;e.$_pfocustrap_mutationobserver=new MutationObserver(function(u){u.forEach(function(l){if(l.type==="childList"&&!e.contains(document.activeElement)){var f=function(a){var i=h(a)?h(a,n.getComputedSelector(e.$_pfocustrap_focusableselector))?a:b(e,n.getComputedSelector(e.$_pfocustrap_focusableselector)):b(a);return j(i)?i:a.nextSibling&&f(a.nextSibling)};_(f(l.nextSibling))}})}),e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_mutationobserver.observe(e,{childList:!0}),e.$_pfocustrap_focusinlistener=function(u){return s&&s(u)},e.$_pfocustrap_focusoutlistener=function(u){return c&&c(u)},e.addEventListener("focusin",e.$_pfocustrap_focusinlistener),e.addEventListener("focusout",e.$_pfocustrap_focusoutlistener)},unbind:function(e){e.$_pfocustrap_mutationobserver&&e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_focusinlistener&&e.removeEventListener("focusin",e.$_pfocustrap_focusinlistener)&&(e.$_pfocustrap_focusinlistener=null),e.$_pfocustrap_focusoutlistener&&e.removeEventListener("focusout",e.$_pfocustrap_focusoutlistener)&&(e.$_pfocustrap_focusoutlistener=null)},autoFocus:function(e){this.autoElementFocus(this.$el,{value:F(F({},e),{},{autoFocus:!0})})},autoElementFocus:function(e,r){var n=r.value||{},o=n.autoFocusSelector,s=o===void 0?"":o,c=n.firstFocusableSelector,u=c===void 0?"":c,l=n.autoFocus,f=l===void 0?!1:l,p=b(e,"[autofocus]".concat(this.getComputedSelector(s)));f&&!p&&(p=b(e,this.getComputedSelector(u))),_(p)},onFirstHiddenElementFocus:function(e){var r,n=e.currentTarget,o=e.relatedTarget,s=o===n.$_pfocustrap_lasthiddenfocusableelement||!((r=this.$el)!==null&&r!==void 0&&r.contains(o))?b(n.parentElement,this.getComputedSelector(n.$_pfocustrap_focusableselector)):n.$_pfocustrap_lasthiddenfocusableelement;_(s)},onLastHiddenElementFocus:function(e){var r,n=e.currentTarget,o=e.relatedTarget,s=o===n.$_pfocustrap_firsthiddenfocusableelement||!((r=this.$el)!==null&&r!==void 0&&r.contains(o))?P(n.parentElement,this.getComputedSelector(n.$_pfocustrap_focusableselector)):n.$_pfocustrap_firsthiddenfocusableelement;_(s)},createHiddenFocusableElements:function(e,r){var n=this,o=r.value||{},s=o.tabIndex,c=s===void 0?0:s,u=o.firstFocusableSelector,l=u===void 0?"":u,f=o.lastFocusableSelector,p=f===void 0?"":f,a=function(y){return O("span",{class:"p-hidden-accessible p-hidden-focusable",tabIndex:c,role:"presentation","aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0,onFocus:y==null?void 0:y.bind(n)})},i=a(this.onFirstHiddenElementFocus),d=a(this.onLastHiddenElementFocus);i.$_pfocustrap_lasthiddenfocusableelement=d,i.$_pfocustrap_focusableselector=l,i.setAttribute("data-pc-section","firstfocusableelement"),d.$_pfocustrap_firsthiddenfocusableelement=i,d.$_pfocustrap_focusableselector=p,d.setAttribute("data-pc-section","lastfocusableelement"),e.prepend(i),e.append(d)}}}),z=w();export{M as C,q as F,z as O};
